=+=+= Ping test to all the target routers =+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
Router           Host           Ping
------------------------------------
openwrt1         192.168.1.101  OK
rpi1             192.168.1.104  OK
openwrt2         192.168.1.102  OK
openwrt3         192.168.1.103  OK
=+=+= NLAN Request to router:openwrt3,platform:openwrt +=+=+=+=+=+=+=+=+=+=+=+
command: init.run
=+=+= NLAN Request to router:openwrt2,platform:openwrt +=+=+=+=+=+=+=+=+=+=+=+
command: init.run
=+=+= NLAN Request to router:openwrt1,platform:openwrt +=+=+=+=+=+=+=+=+=+=+=+
command: init.run
=+=+= NLAN Request to router:rpi1,platform:debian =+=+=+=+=+=+=+=+=+=+=+=+=+=+
command: init.run
*** Response from router:openwrt2,platform:openwrt
From nobody Thu May 29 01:39:15 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ"

--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: test/plain
Content-Description: Default out
X-NLAN-Type: default_out


--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:04, 223 module:nlan_agent,
 function:_init, router:openwrt2
X-NLAN-Type: logger

NLAN Agent initialization completed
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 223 module:nlan_agent,
 function:_init, router:openwrt2
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0xb758b80c>, 'share_dir': '/opt/nlan/share', 'router': 'openwrt2', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'openwrt', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0xb7593c8c>, 'schema': 'ovsdb_nlan.schema'}
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:04, 237 module:nlan_agent,
 function:_route, router:openwrt2
X-NLAN-Type: logger

function:init.run, args:(), kwargs:{}
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 242 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: lxc-ls
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 257 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-tun
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 300 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-int
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 305 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl show
bridge name	bridge id		STP enabled	interfaces
br1		8000.069edbf1780d	no		veth-ns1
br101		8000.a2230f47c266	no		veth-ns101
br103		8000.4e03ec2a5cdd	no		veth-ns103

--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 312 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 down
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 318 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl delif br101 veth-ns101
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 323 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 up
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 326 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev br101 down
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 331 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl delbr br101
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 335 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 down
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 342 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl delif br103 veth-ns103
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 345 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 up
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 346 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev br103 down
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 351 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl delbr br103
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 355 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 down
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 358 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl delif br1 veth-ns1
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 360 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 up
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 362 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev br1 down
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 367 module:cmdutil*** Response from router:openwrt3,platform:openwrt
From nobody Thu May 29 01:39:15 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="2jt39Livc3Dal7ktAwvnJ79lKmpsAueg"

--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: test/plain
Content-Description: Default out
X-NLAN-Type: default_out


--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:04, 247 module:nlan_agent,
 function:_init, router:openwrt3
X-NLAN-Type: logger

NLAN Agent initialization completed
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 248 module:nlan_agent,
 function:_init, router:openwrt3
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0xb751ed0c>, 'share_dir': '/opt/nlan/share', 'router': 'openwrt3', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'openwrt', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0xb753158c>, 'schema': 'ovsdb_nlan.schema'}
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:04, 260 module:nlan_agent,
 function:_route, router:openwrt3
X-NLAN-Type: logger

function:init.run, args:(), kwargs:{}
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 266 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: lxc-ls
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 281 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-tun
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 325 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-int
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 328 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl show
bridge name	bridge id		STP enabled	interfaces
br101		8000.c6679c27f872	no		veth-ns101
br103		8000.7a59379afb1e	no		veth-ns103
br1		8000.06133861aebd	no		veth-ns1

--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 335 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 down
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 340 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl delif br101 veth-ns101
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 346 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 up
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 347 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev br101 down
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 349 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl delbr br101
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 353 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 down
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 357 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl delif br103 veth-ns103
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 362 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 up
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 365 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev br103 down
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 368 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl delbr br103
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 372 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 down
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 376 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl delif br1 veth-ns1
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 378 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 up
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 380 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev br1 down
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 385 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl delbr br1
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 371 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns list
ns103
ns101
ns1

--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 373 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns del ns103
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 376 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns del ns101
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 377 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns del ns1
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:04, 381 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[],"columns":["vni","ip_dvr"],"op":"select"}],"method":"transact","id":398547}, "response":{"id":398547,"result":[{"rows":[{"vni":1,"ip_dvr":["map",[["addr","192.168.100.2/24"],["mode","dvr"]]]},{"vni":101,"ip_dvr":["map",[["addr","10.0.1.1/24"],["mode","spoke_dvr"]]]},{"vni":103,"ip_dvr":["map",[["addr","10.0.3.1/24"],["mode","dvr"]]]}]}],"error":null}}
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:04, 384 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"delete"}],"method":"transact","id":116576}, "response":{"id":116576,"result":[{"count":1}],"error":null}}
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: application/x-nlan
Content-Description: NLAN Response
X-NLAN-Type: nlan_response

OrderedDict([('message', 'Execution completed'), ('exit', 0)])
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:04, 385 module:nlan_agent,
 function:<module>, router:openwrt2
X-NLAN-Type: logger

NLAN Agent execution completed
--4grG8xUyz7EY3xB6IHZRxdOihuA2FirJ--


*** Response from router:rpi1,platform:debian
From nobody Thu May 29 01:39:15 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD"

--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: test/plain
Content-Description: Default out
X-NLAN-Type: default_out


--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:24, 662 module:nlan_agent,
 function:_init, router:rpi1
X-NLAN-Type: logger

NLAN Agent initialization completed
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 663 module:nlan_agent,
 function:_init, router:rpi1
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0x8f2f92c>, 'share_dir': '/opt/nlan/share', 'router': 'rpi1', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'debian', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0x8f3a50c>, 'schema': 'ovsdb_nlan.schema'}
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:24, 672 module:nlan_agent,
 function:_route, router:rpi1
X-NLAN-Type: logger

function:init.run, args:(), kwargs:{}
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 726 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: lxc-ls
snort1
snort2

--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 730 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: lxc-stop -n snort1
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 733 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: lxc-stop -n snort2
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 744 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-tun
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 764 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-int
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 802 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: brctl show
bridge name	bridge id		STP enabled	interfaces
br1001		8000.fefe0a31ed12	no		dmz.1001
br101		8000.fe0329af6282	no		mz.101
virbr0		8000.080027e9e182	no		eth0

--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 809 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev dmz.1001 down
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 816 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: brctl delif br1001 dmz.1001
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 824 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev dmz.1001 up
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 826 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev br1001 down
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 827 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: brctl delbr br1001
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 831 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev mz.101 down
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 833 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: brctl delif br101 mz.101
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 838 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev mz.101 up
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 842 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev br101 down
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 844 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: brctl delbr br101
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:24, 846 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ip netns list
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:24, 857 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN", "where": [], "op": "delete"}], "method": "transact", "id": 627070}, "response":{"id":627070,"result":[{"count":1}],"error":null}}
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: application/x-nlan
Content-Description: NLAN Resp,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl delbr br1
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 389 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns list
ns1
ns103
ns101

--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 392 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns del ns1
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 394 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns del ns103
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:04, 396 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns del ns101
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:04, 436 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[],"columns":["vni","ip_dvr"],"op":"select"}],"method":"transact","id":190820}, "response":{"id":190820,"result":[{"rows":[{"vni":101,"ip_dvr":["map",[["addr","10.0.1.1/24"],["mode","spoke_dvr"]]]},{"vni":103,"ip_dvr":["map",[["addr","10.0.3.1/24"],["mode","dvr"]]]},{"vni":1,"ip_dvr":["map",[["addr","192.168.100.3/24"],["mode","dvr"]]]}]}],"error":null}}
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:04, 439 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"delete"}],"method":"transact","id":682841}, "response":{"id":682841,"result":[{"count":1}],"error":null}}
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: application/x-nlan
Content-Description: NLAN Response
X-NLAN-Type: nlan_response

OrderedDict([('message', 'Execution completed'), ('exit', 0)])
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:04, 440 module:nlan_agent,
 function:<module>, router:openwrt3
X-NLAN-Type: logger

NLAN Agent execution completed
--2jt39Livc3Dal7ktAwvnJ79lKmpsAueg--


onse
X-NLAN-Type: nlan_response

OrderedDict([('message', 'Execution completed'), ('exit', 0)])
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:24, 857 module:nlan_agent,
 function:<module>, router:rpi1
X-NLAN-Type: logger

NLAN Agent execution completed
--z99KEXLA6eA6Dv8hV6kgIRo6YI3SBwtD--


*** Response from router:openwrt1,platform:openwrt
From nobody Thu May 29 01:39:17 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO"

--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: test/plain
Content-Description: Default out
X-NLAN-Type: default_out


--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:05, 776 module:nlan_agent,
 function:_init, router:openwrt1
X-NLAN-Type: logger

NLAN Agent initialization completed
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 777 module:nlan_agent,
 function:_init, router:openwrt1
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0xb755dfac>, 'share_dir': '/opt/nlan/share', 'router': 'openwrt1', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'openwrt', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0xb756fc2c>, 'schema': 'ovsdb_nlan.schema'}
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:05, 788 module:nlan_agent,
 function:_route, router:openwrt1
X-NLAN-Type: logger

function:init.run, args:(), kwargs:{}
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 795 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: lxc-ls
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 809 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-tun
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 854 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-int
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 861 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl show
bridge name	bridge id		STP enabled	interfaces
br1		8000.966cc50cd43f	no		veth-ns1
br1001		8000.a2fb81f580a1	no		veth-ns1001
br103		8000.62891b4a55a4	no		veth-ns103

--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 868 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1001 down
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 873 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl delif br1001 veth-ns1001
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 877 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1001 up
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 884 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev br1001 down
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 890 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl delbr br1001
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 895 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 down
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 906 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl delif br103 veth-ns103
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 912 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 up
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 916 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev br103 down
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 920 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl delbr br103
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 924 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 down
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 927 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl delif br1 veth-ns1
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 930 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 up
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 932 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev br1 down
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 935 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl delbr br1
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 937 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns list
ns-global
ns103
ns1001
ns1

--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 940 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns del ns-global
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 942 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns del ns103
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 944 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns del ns1001
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 946 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns del ns1
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:05, 949 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[],"columns":["vni","ip_dvr"],"op":"select"}],"method":"transact","id":379856}, "response":{"id":379856,"result":[{"rows":[{"vni":1,"ip_dvr":["map",[["addr","192.168.100.1/24"],["mode","dvr"]]]},{"vni":1001,"ip_dvr":["map",[["addr","10.0.1.1/24"],["dhcp","enabled"],["mode","hub"]]]},{"vni":103,"ip_dvr":["map",[["addr","10.0.3.1/24"],["dhcp","enabled"],["mode","dvr"]]]}]}],"error":null}}
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 954 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci delete network.int_dvr1001
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 956 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci delete dhcp.int_dvr1001
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:05, 967 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci commit
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:06, 999 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/network restart
Command failed: Not found

--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:07, 060 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/dnsmasq restart
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:07, 071 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci delete network.int_dvr103
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:07, 073 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci delete dhcp.int_dvr103
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:07, 083 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci commit
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 125 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/network restart
Command failed: Not found

--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 198 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/dnsmasq restart
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 199 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"delete"}],"method":"transact","id":73624}, "response":{"id":73624,"result":[{"count":1}],"error":null}}
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: application/x-nlan
Content-Description: NLAN Response
X-NLAN-Type: nlan_response

OrderedDict([('message', 'Execution completed'), ('exit', 0)])
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 199 module:nlan_agent,
 function:<module>, router:openwrt1
X-NLAN-Type: logger

NLAN Agent execution completed
--fytkkMVe3ViFdSSIdzOz6XBoxOp6NquO--


=+=+= Transaction Summary =+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+

Start Time: 2014-05-29 01:39:15.091463

Router           Result    Elapsed Time
---------------------------------------
openwrt2          :-)         0.53(sec)
openwrt3          :-)         0.55(sec)
rpi1              :-)         0.62(sec)
openwrt1          :-)         2.84(sec)
=+=+= Ping test to all the target routers =+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
Router           Host           Ping
------------------------------------
rpi1             192.168.1.104  OK
openwrt3         192.168.1.103  OK
openwrt1         192.168.1.101  OK
openwrt2         192.168.1.102  OK
=+=+= NLAN Request to router:rpi1,platform:debian =+=+=+=+=+=+=+=+=+=+=+=+=+=+
operation: --add
dict_args: "OrderedDict([('bridges', {'ovs_bridges': 'enabled'}), ('services', [{'name': 'snort1', 'chain': ['mz.101', 'dmz.1001'], '_index': ['name', 'snort1']}]), ('vxlan', {'remote_ips': ['192.168.1.103', '192.168.1.102', '192.168.1.101'], 'local_ip': '192.168.1.104'}), ('subnets', [{'ports': ['dmz.1001'], 'peers': ['192.168.1.101'], 'vni': 1001, 'vid': 111, '_index': ['vni', 1001]}, {'ports': ['mz.101'], 'peers': ['192.168.1.102', '192.168.1.103'], 'vni': 101, 'vid': 1, '_index': ['vni', 101]}])])"
=+=+= NLAN Request to router:openwrt3,platform:openwrt +=+=+=+=+=+=+=+=+=+=+=+
operation: --add
dict_args: "OrderedDict([('bridges', {'ovs_bridges': 'enabled'}), ('vxlan', {'remote_ips': ['192.168.1.102', '192.168.1.101', '192.168.1.104'], 'local_ip': '192.168.1.103'}), ('subnets', [{'peers': ['192.168.1.101', '192.168.1.102'], 'vid': 2, '_index': ['vni', 1], 'ip_vhost': '192.168.100.103/24', 'default_gw': '192.168.100.1', 'ip_dvr': OrderedDict([('addr', '192.168.100.3/24'), ('mode', 'dvr')]), 'vni': 1}, {'peers': ['192.168.1.101', '192.168.1.102'], 'vid': 3, '_index': ['vni', 103], 'ip_vhost': '10.0.3.103/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr')])}, {'peers': ['192.168.1.102', '192.168.1.104'], 'vid': 1, '_index': ['vni', 101], 'ip_vhost': '10.0.1.103/24', 'vni': 101, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'spoke_dvr')])}])])"
=+=+= NLAN Request to router:openwrt2,platform:openwrt +=+=+=+=+=+=+=+=+=+=+=+
operation: --add
dict_args: "OrderedDict([('bridges', {'ovs_bridges': 'enabled'}), ('vxlan', {'remote_ips': ['192.168.1.103', '192.168.1.101', '192.168.1.104'], 'local_ip': '192.168.1.102'}), ('subnets', [{'peers': ['192.168.1.101', '192.168.1.103'], 'vid': 2, '_index': ['vni', 1], 'ip_vhost': '192.168.100.102/24', 'default_gw': '192.168.100.1', 'ip_dvr': OrderedDict([('addr', '192.168.100.2/24'), ('mode', 'dvr')]), 'vni': 1}, {'peers': ['192.168.1.101', '192.168.1.103'], 'vid': 3, '_index': ['vni', 103], 'ip_vhost': '10.0.3.102/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr')])}, {'peers': ['192.168.1.103', '192.168.1.104'], 'vid': 1, '_index': ['vni', 101], 'ip_vhost': '10.0.1.102/24', 'vni': 101, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'spoke_dvr')])}])])"
=+=+= NLAN Request to router:openwrt1,platform:openwrt +=+=+=+=+=+=+=+=+=+=+=+
operation: --add
dict_args: "OrderedDict([('bridges', {'ovs_bridges': 'enabled'}), ('gateway', {'network': 'eth2', 'rip': 'enabled'}), ('vxlan', {'remote_ips': ['192.168.1.103', '192.168.1.102', '192.168.1.104'], 'local_ip': '192.168.1.101'}), ('subnets', [{'peers': ['192.168.1.102', '192.168.1.103'], 'vid': 2, '_index': ['vni', 1], 'ip_vhost': '192.168.100.101/24', 'vni': 1, 'ip_dvr': OrderedDict([('addr', '192.168.100.1/24'), ('mode', 'dvr')])}, {'peers': ['192.168.1.102', '192.168.1.103'], 'vid': 3, '_index': ['vni', 103], 'ip_vhost': '10.0.3.101/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr'), ('dhcp', 'enabled')])}, {'peers': ['192.168.1.104'], 'vid': 1, '_index': ['vni', 1001], 'ip_vhost': '10.0.1.101/24', 'vni': 1001, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'hub'), ('dhcp', 'enabled')])}])])"
*** Response from router:openwrt2,platform:openwrt
From nobody Thu May 29 01:39:19 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo"

--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: test/plain
Content-Description: Default out
X-NLAN-Type: default_out


--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:07, 886 module:nlan_agent,
 function:_init, router:openwrt2
X-NLAN-Type: logger

NLAN Agent initialization completed
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:07, 886 module:nlan_agent,
 function:_init, router:openwrt2
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0xb7553f2c>, 'share_dir': '/opt/nlan/share', 'router': 'openwrt2', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'openwrt', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0xb75575ec>, 'schema': 'ovsdb_nlan.schema'}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:07, 935 module:nlan_agent,
 function:_route, router:openwrt2
X-NLAN-Type: logger

function:bridges.add, model:{'ovs_bridges': 'enabled'}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:07, 939 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":205815}, "response":{"id":205815,"result":[{"rows":[]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:07, 940 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","row":{},"op":"insert"}],"method":"transact","id":834713}, "response":{"id":834713,"result":[{"uuid":["uuid","a896a3e4-921e-4e86-98eb-0790b820de6a"]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:07, 941 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","where":[],"op":"select"}],"method":"transact","id":587260}, "response":{"id":587260,"result":[{"rows":[]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:07, 942 module:oputil,
 function:__enter__, router:openwrt2
X-NLAN-Type: logger

CRUD.params()
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:07, 942 module:bridges,
 function:add, router:openwrt2
X-NLAN-Type: logger

Adding bridges: br-int and br-tun
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:07, 953 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-int
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:07, 971 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-tun
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:07, 978 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl del-flows br-tun
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:07, 989 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int patch-int -- set interface patch-int type=patch options:peer=patch-tun
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:07, 998 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun patch-tun -- set interface patch-tun type=patch options:peer=patch-int
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:07, 999 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["name","==","patch-tun"]],"op":"select"}],"method":"transact","id":302512}, "response":{"id":302512,"result":[{"rows":[{"options":["map",[["peer","patch-int"]]],"mtu":["set",[]],"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"a6:2e:3d:10:71:5e","ingress_policing_rate":0,"ofport":1,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":["set",[]],"external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":["set",[]],"name":"patch-tun","type":"patch","cfm_remote_opstate":["set",[]],"_uuid":["uuid","32e919d3-4675-4b65-90d1-b7f00598a12f"],"status":["map",[]],"ifindex":0,"_version":["uuid","bb6ea13a-f08f-405c-be72-01c41aa430f1"],"other_config":["map",[]],"admin_state":["set",[]],"cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 007 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=1,actions=resubmit(,1)
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 011 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=0,actions=drop
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 015 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=01:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,19)
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 019 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=00:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,20)
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 023 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=0,actions=drop
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 027 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=3,priority=0,actions=drop
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 031 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=10,priority=1,actions=learn(table=20,hard_timeout=300,priority=1,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:0->NXM_OF_VLAN_TCI[],load:NXM_NX_TUN_ID[]->NXM_NX_TUN_ID[],output:NXM_OF_IN_PORT[]),output:1
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 036 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=0,actions=resubmit(,21)
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 039 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=20,priority=0,actions=resubmit(,21)
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 044 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=0,actions=drop
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 044 module:oputil,
 function:__exit__, router:openwrt2
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 044 module:ovsdb,
 function:crud, router:openwrt2
X-NLAN-Type: logger

CRUD operation (add): {'ovs_bridges': 'enabled'}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 045 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","uuid-name":"temp_540424","row":{"ovs_bridges":"enabled"},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["bridges","insert",["set",[["named-uuid","temp_540424"]]]]],"op":"mutate"}],"method":"transact","id":138895}, "response":{"id":138895,"result":[{"uuid":["uuid","050bd380-09ed-43d0-9829-3d4647e0f21f"]},{"count":1}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 047 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","where":[],"op":"select"}],"method":"transact","id":248646}, "response":{"id":248646,"result":[{"rows":[{"_uuid":["uuid","050bd380-09ed-43d0-9829-3d4647e0f21f"],"_version":["uuid","101992df-7772-47a8-a4de-0a3375a6b395"],"ovs_bridges":"enabled","controller":["set",[]]}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 049 module:nlan_agent,
 function:_route, router:openwrt2
X-NLAN-Type: logger

function:vxlan.add, model:{'remote_ips': ['192.168.1.103', '192.168.1.101', '192.168.1.104'], 'local_ip': '192.168.1.102'}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 049 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":294012}, "response":{"id":294012,"result":[{"rows":[{"_uuid":["uuid","a896a3e4-921e-4e86-98eb-0790b820de6a"],"_version":["uuid","c07fd44d-c127-44f1-b50a-e76b7615cf6a"],"gateway":["set",[]],"bridges":["uuid","050bd380-09ed-43d0-9829-3d4647e0f21f"],"subnets":["set",[]],"vxlan":["set",[]],"services":["set",[]]}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 052 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","where":[],"op":"select"}],"method":"transact","id":169446}, "response":{"id":169446,"result":[{"rows":[]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 055 module:oputil,
 function:__enter__, router:openwrt2
X-NLAN-Type: logger

CRUD.params()
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 055 module:vxlan, function:add,
 router:openwrt2
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001103
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 065 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001103 -- set interface 192168001103 type=vxlan options:in_key=flow options:local_ip=192.168.1.102 options:out_key=flow options:remote_ip=192.168.1.103
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 065 module:vxlan, function:add,
 router:openwrt2
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001101
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 074 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001101 -- set interface 192168001101 type=vxlan options:in_key=flow options:local_ip=192.168.1.102 options:out_key=flow options:remote_ip=192.168.1.101
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 075 module:vxlan, function:add,
 router:openwrt2
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001104
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 085 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001104 -- set interface 192168001104 type=vxlan options:in_key=flow options:local_ip=192.168.1.102 options:out_key=flow options:remote_ip=192.168.1.104
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 086 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":260294}, "response":{"id":260294,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 093 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=3,actions=resubmit(,2)
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 097 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=2,actions=resubmit(,2)
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 101 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=4,actions=resubmit(,2)
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 101 module:oputil,
 function:__exit__, router:openwrt2
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 101 module:ovsdb,
 function:crud, router:openwrt2
X-NLAN-Type: logger

CRUD operation (add): {'remote_ips': ['192.168.1.103', '192.168.1.101', '192.168.1.104'], 'local_ip': '192.168.1.102'}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 102 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","uuid-name":"temp_469854","row":{"remote_ips":["set",["192.168.1.103","192.168.1.101","192.168.1.104"]],"local_ip":"192.168.1.102"},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["vxlan","insert",["set",[["named-uuid","temp_469854"]]]]],"op":"mutate"}],"method":"transact","id":85944}, "response":{"id":85944,"result":[{"uuid":["uuid","ff890ea9-4832-403f-b797-e2cfc25d45cf"]},{"count":1}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 103 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","where":[],"op":"select"}],"method":"transact","id":531366}, "response":{"id":531366,"result":[{"rows":[{"_version":["uuid","2b244229-8daf-450b-83d8-3a84f6d9617d"],"_uuid":["uuid","ff890ea9-4832-403f-b797-e2cfc25d45cf"],"local_ip":"192.168.1.102","remote_ips":["set",["192.168.1.101","192.168.1.103","192.168.1.104"]]}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 111 module:nlan_agent,
 function:_route, router:openwrt2
X-NLAN-Type: logger

function:subnets.add, index:['vni', 1], model:{'peers': ['192.168.1.101', '192.168.1.103'], 'vid': 2, 'ip_vhost': '192.168.100.102/24', 'default_gw': '192.168.100.1', 'ip_dvr': OrderedDict([('addr', '192.168.100.2/24'), ('mode', 'dvr')]), 'vni': 1}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 112 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":189995}, "response":{"id":189995,"result":[{"rows":[{"_uuid":["uuid","a896a3e4-921e-4e86-98eb-0790b820de6a"],"_version":["uuid","356d7c58-5790-4ab2-9c47-48efa8c52e41"],"gateway":["set",[]],"bridges":["uuid","050bd380-09ed-43d0-9829-3d4647e0f21f"],"subnets":["set",[]],"vxlan":["uuid","ff890ea9-4832-403f-b797-e2cfc25d45cf"],"services":["set",[]]}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 114 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1]],"op":"select"}],"method":"transact","id":457096}, "response":{"id":457096,"result":[{"rows":[]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 115 module:oputil,
 function:__enter__, router:openwrt2
X-NLAN-Type: logger

CRUD.params()
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 115 module:subnets,
 function:add, router:openwrt2
X-NLAN-Type: logger

Adding a subnet(vlan): 2
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 120 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addbr br1
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 136 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br1 tag=2 -- set interface int_br1 type=internal
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 154 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr1 tag=2 -- set interface int_dvr1 type=internal
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 161 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addif br1 int_br1
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 165 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_br1 promisc on
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 167 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_br1 up
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 170 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_dvr1 up
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 175 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev br1 up
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 179 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns add ns1
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 184 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link add veth-ns1 type veth peer name temp-ns1
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 192 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev temp-ns1 netns ns1
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 197 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip link set dev temp-ns1 name eth0
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 202 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addif br1 veth-ns1
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 206 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 promisc on
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 215 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 up
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 221 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip link set dev eth0 up
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 223 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip addr add dev eth0 192.168.100.102/24
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 226 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip route add default via 192.168.100.2 dev eth0
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 227 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr1 192.168.100.2/24
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 230 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
10.0.2.0        *               255.255.255.0   U     0      0        0 eth0
192.168.1.0     *               255.255.255.0   U     0      0        0 eth2
192.168.56.0    *               255.255.255.0   U     0      0        0 eth1
192.168.100.0   *               255.255.255.0   U     0      0        0 int_dvr1

--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 232 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip route add default via 192.168.100.1
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 233 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":196958}, "response":{"id":196958,"result":[{"rows":[]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 238 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=1,actions=mod_vlan_vid:2,resubmit(,10)
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 243 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=1,dl_type=0x0806,dl_vlan=2,nw_dst=192.168.100.2,actions=drop
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 244 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":226825}, "response":{"id":226825,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 248 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=2,actions=strip_vlan,set_tunnel:1,output:3,output:2
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 248 module:oputil,
 function:__exit__, router:openwrt2
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 248 module:ovsdb,
 function:crud, router:openwrt2
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.101', '192.168.1.103'], 'vid': 2, 'ip_vhost': '192.168.100.102/24', 'default_gw': '192.168.100.1', 'ip_dvr': OrderedDict([('addr', '192.168.100.2/24'), ('mode', 'dvr')]), 'vni': 1}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 249 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_131245","row":{"peers":["set",["192.168.1.101","192.168.1.103"]],"vid":2,"ip_vhost":"192.168.100.102/24","default_gw":"192.168.100.1","ip_dvr":["map",[["addr","192.168.100.2/24"],["mode","dvr"]]],"vni":1},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_131245"]]]]],"op":"mutate"}],"method":"transact","id":753592}, "response":{"id":753592,"result":[{"uuid":["uuid","a04ae038-b983-4390-bbb6-7ef58f1191ad"]},{"count":1}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 250 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1]],"op":"select"}],"method":"transact","id":79614}, "response":{"id":79614,"result":[{"rows":[{"peers":["set",["192.168.1.101","192.168.1.103"]],"_version":["uuid","99cd4f8b-af49-4294-9b4e-ce923d4c1e4d"],"ports":["set",[]],"vni":1,"vid":2,"_uuid":["uuid","a04ae038-b983-4390-bbb6-7ef58f1191ad"],"default_gw":"192.168.100.1","ip_vhost":"192.168.100.102/24","ip_dvr":["map",[["addr","192.168.100.2/24"],["mode","dvr"]]]}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 254 module:nlan_agent,
 function:_route, router:openwrt2
X-NLAN-Type: logger

function:subnets.add, index:['vni', 103], model:{'peers': ['192.168.1.101', '192.168.1.103'], 'vid': 3, 'ip_vhost': '10.0.3.102/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr')])}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 254 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":127916}, "response":{"id":127916,"result":[{"rows":[{"_uuid":["uuid","a896a3e4-921e-4e86-98eb-0790b820de6a"],"_version":["uuid","98cb58e3-9399-4a23-9fad-d51f914693fc"],"gateway":["set",[]],"bridges":["uuid","050bd380-09ed-43d0-9829-3d4647e0f21f"],"subnets":["uuid","a04ae038-b983-4390-bbb6-7ef58f1191ad"],"vxlan":["uuid","ff890ea9-4832-403f-b797-e2cfc25d45cf"],"services":["set",[]]}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 256 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",103]],"op":"select"}],"method":"transact","id":548766}, "response":{"id":548766,"result":[{"rows":[]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 258 module:oputil,
 function:__enter__, router:openwrt2
X-NLAN-Type: logger

CRUD.params()
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 258 module:subnets,
 function:add, router:openwrt2
X-NLAN-Type: logger

Adding a subnet(vlan): 3
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 263 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addbr br103
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 276 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br103 tag=3 -- set interface int_br103 type=internal
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 292 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr103 tag=3 -- set interface int_dvr103 type=internal
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 297 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addif br103 int_br103
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 300 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_br103 promisc on
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 301 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_br103 up
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 303 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_dvr103 up
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 308 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev br103 up
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 312 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns add ns103
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 318 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link add veth-ns103 type veth peer name temp-ns103
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 321 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev temp-ns103 netns ns103
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 328 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip link set dev temp-ns103 name eth0
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 332 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addif br103 veth-ns103
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 337 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 promisc on
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 342 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 up
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 347 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip link set dev eth0 up
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 350 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip addr add dev eth0 10.0.3.102/24
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 352 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip route add default via 10.0.3.1 dev eth0
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 355 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr103 10.0.3.1/24
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 356 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":334429}, "response":{"id":334429,"result":[{"rows":[]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 359 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=103,actions=mod_vlan_vid:3,resubmit(,10)
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 363 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=1,dl_type=0x0806,dl_vlan=3,nw_dst=10.0.3.1,actions=drop
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 364 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":29528}, "response":{"id":29528,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 370 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=3,actions=strip_vlan,set_tunnel:103,output:3,output:2
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 370 module:oputil,
 function:__exit__, router:openwrt2
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 370 module:ovsdb,
 function:crud, router:openwrt2
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.101', '192.168.1.103'], 'vid': 3, 'ip_vhost': '10.0.3.102/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr')])}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 372 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_282007","row":{"vni":103,"ip_dvr":["map",[["addr","10.0.3.1/24"],["mode","dvr"]]],"peers":["set",["192.168.1.101","192.168.1.103"]],"ip_vhost":"10.0.3.102/24","vid":3},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_282007"]]]]],"op":"mutate"}],"method":"transact","id":967055}, "response":{"id":967055,"result":[{"uuid":["uuid","c5f42f6f-77d5-4ff3-9c89-af7da907b4ee"]},{"count":1}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 373 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",103]],"op":"select"}],"method":"transact","id":330222}, "response":{"id":330222,"result":[{"rows":[{"peers":["set",["192.168.1.101","192.168.1.103"]],"_version":["uuid","28a4639e-0156-46a2-8c9b-78548be26213"],"ports":["set",[]],"vni":103,"vid":3,"_uuid":["uuid","c5f42f6f-77d5-4ff3-9c89-af7da907b4ee"],"default_gw":["set",[]],"ip_vhost":"10.0.3.102/24","ip_dvr":["map",[["addr","10.0.3.1/24"],["mode","dvr"]]]}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 375 module:nlan_agent,
 function:_route, router:openwrt2
X-NLAN-Type: logger

function:subnets.add, index:['vni', 101], model:{'peers': ['192.168.1.103', '192.168.1.104'], 'vid': 1, 'ip_vhost': '10.0.1.102/24', 'vni': 101, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'spoke_dvr')])}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 376 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":353950}, "response":{"id":353950,"result":[{"rows":[{"_uuid":["uuid","a896a3e4-921e-4e86-98eb-0790b820de6a"],"_version":["uuid","38e5ad95-e671-4765-b04d-790e7b4f40ad"],"gateway":["set",[]],"bridges":["uuid","050bd380-09ed-43d0-9829-3d4647e0f21f"],"subnets":["set",[["uuid","a04ae038-b983-4390-bbb6-7ef58f1191ad"],["uuid","c5f42f6f-77d5-4ff3-9c89-af7da907b4ee"]]],"vxlan":["uuid","ff890ea9-4832-403f-b797-e2cfc25d45cf"],"services":["set",[]]}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 378 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",101]],"op":"select"}],"method":"transact","id":380456}, "response":{"id":380456,"result":[{"rows":[]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 378 module:oputil,
 function:__enter__, router:openwrt2
X-NLAN-Type: logger

CRUD.params()
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 379 module:subnets,
 function:add, router:openwrt2
X-NLAN-Type: logger

Adding a subnet(vlan): 1
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 383 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addbr br101
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 402 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br101 tag=1 -- set interface int_br101 type=internal
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 420 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr101 tag=1 -- set interface int_dvr101 type=internal
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 423 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addif br101 int_br101
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 426 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_br101 promisc on
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 430 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_br101 up
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 431 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_dvr101 up
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 437 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev br101 up
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 441 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns add ns101
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 448 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link add veth-ns101 type veth peer name temp-ns101
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 453 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev temp-ns101 netns ns101
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 459 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip link set dev temp-ns101 name eth0
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 465 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addif br101 veth-ns101
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 468 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 promisc on
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 475 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 up
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 480 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip link set dev eth0 up
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 482 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip addr add dev eth0 10.0.1.102/24
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 483 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip route add default via 10.0.1.1 dev eth0
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 486 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr101 10.0.1.1/24
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 486 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":783076}, "response":{"id":783076,"result":[{"rows":[]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 490 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=101,actions=mod_vlan_vid:1,resubmit(,10)
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 492 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ip link show dev int_dvr101
44: int_dvr101: <BROADCAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UNKNOWN mode DEFAULT group default 
    link/ether 3e:ac:f7:3d:67:bd brd ff:ff:ff:ff:ff:ff

--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 493 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["name","==","int_dvr101"]],"op":"select"}],"method":"transact","id":67574}, "response":{"id":67574,"result":[{"rows":[{"options":["map",[]],"mtu":1500,"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"3e:ac:f7:3d:67:bd","ingress_policing_rate":0,"ofport":7,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":"up","external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":2,"name":"int_dvr101","type":"internal","cfm_remote_opstate":["set",[]],"_uuid":["uuid","977901c3-77cc-4d06-81ab-e306282e0d76"],"status":["map",[["driver_name","openvswitch"]]],"ifindex":44,"_version":["uuid","a92eb858-28c5-4e01-9018-9aa525c3ef02"],"other_config":["map",[]],"admin_state":"up","cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 497 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["name","==","int_br101"]],"op":"select"}],"method":"transact","id":600957}, "response":{"id":600957,"result":[{"rows":[{"options":["map",[]],"mtu":1500,"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"fa:99:5e:4c:c4:c5","ingress_policing_rate":0,"ofport":6,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":"up","external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":2,"name":"int_br101","type":"internal","cfm_remote_opstate":["set",[]],"_uuid":["uuid","aebdc143-e864-41ab-b75c-44e251712046"],"status":["map",[["driver_name","openvswitch"]]],"ifindex":43,"_version":["uuid","a160a613-f853-4ad3-ae2b-90b251b8f0c4"],"other_config":["map",[]],"admin_state":"up","cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 507 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=2,in_port=6,dl_type=0x0800,nw_dst=10.0.1.0/24,actions=normal
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 510 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=6,dl_type=0x0800,nw_dst=10.0.0.0/8,actions=resubmit(,1)
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 513 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=6,dl_type=0x0800,nw_dst=172.16.0.0/12,actions=resubmit(,1)
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 517 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=6,dl_type=0x0800,nw_dst=192.168.0.0/16,actions=resubmit(,1)
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 520 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=7,dl_type=0x0806,nw_src=10.0.1.1,nw_proto=2,actions=drop
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 524 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=1,priority=0,in_port=6,actions=set_field:3e:ac:f7:3d:67:bd->dl_dst,output:7
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 524 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":923849}, "response":{"id":923849,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 531 module:cmdutil,
 function:log, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=1,actions=strip_vlan,set_tunnel:101,output:2,output:4
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 531 module:oputil,
 function:__exit__, router:openwrt2
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 531 module:ovsdb,
 function:crud, router:openwrt2
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.103', '192.168.1.104'], 'vid': 1, 'ip_vhost': '10.0.1.102/24', 'vni': 101, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'spoke_dvr')])}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 533 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_75555","row":{"vni":101,"ip_dvr":["map",[["addr","10.0.1.1/24"],["mode","spoke_dvr"]]],"peers":["set",["192.168.1.103","192.168.1.104"]],"ip_vhost":"10.0.1.102/24","vid":1},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_75555"]]]]],"op":"mutate"}],"method":"transact","id":592979}, "response":{"id":592979,"result":[{"uuid":["uuid","31342be6-3a03-47ea-9741-6e002c19c6ff"]},{"count":1}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 534 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",101]],"op":"select"}],"method":"transact","id":511855}, "response":{"id":511855,"result":[{"rows":[{"peers":["set",["192.168.1.103","192.168.1.104"]],"_version":["uuid","15cd5571-737a-4e6f-bcb9-487bd9e4b96d"],"ports":["set",[]],"vni":101,"vid":1,"_uuid":["uuid","31342be6-3a03-47ea-9741-6e002c19c6ff"],"default_gw":["set",[]],"ip_vhost":"10.0.1.102/24","ip_dvr":["map",[["addr","10.0.1.1/24"],["mode","spoke_dvr"]]]}]}],"error":null}}
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: application/x-nlan
Content-Description: NLAN Response
X-NLAN-Type: nlan_response

OrderedDict([('message', 'Execution completed'), ('exit', 0)])
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 537 module:nlan_agent,
 function:<module>, router:openwrt2
X-NLAN-Type: logger

NLAN Agent execution completed
--ORGOZTbrvw0XAa8SPybAHyPI3GhcKWlo--


*** Response from router:openwrt3,platform:openwrt
From nobody Thu May 29 01:39:19 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW"

--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: test/plain
Content-Description: Default out
X-NLAN-Type: default_out


--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:07, 924 module:nlan_agent,
 function:_init, router:openwrt3
X-NLAN-Type: logger

NLAN Agent initialization completed
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:07, 925 module:nlan_agent,
 function:_init, router:openwrt3
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0xb750726c>, 'share_dir': '/opt/nlan/share', 'router': 'openwrt3', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'openwrt', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0xb7507ecc>, 'schema': 'ovsdb_nlan.schema'}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:07, 972 module:nlan_agent,
 function:_route, router:openwrt3
X-NLAN-Type: logger

function:bridges.add, model:{'ovs_bridges': 'enabled'}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:07, 979 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":309046}, "response":{"id":309046,"result":[{"rows":[]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:07, 980 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","row":{},"op":"insert"}],"method":"transact","id":116734}, "response":{"id":116734,"result":[{"uuid":["uuid","982278cc-2ecb-4fb1-b3df-0f27fabf7485"]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:07, 981 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","where":[],"op":"select"}],"method":"transact","id":176781}, "response":{"id":176781,"result":[{"rows":[]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:07, 982 module:oputil,
 function:__enter__, router:openwrt3
X-NLAN-Type: logger

CRUD.params()
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:07, 982 module:bridges,
 function:add, router:openwrt3
X-NLAN-Type: logger

Adding bridges: br-int and br-tun
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:07, 993 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-int
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 011 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-tun
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 016 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl del-flows br-tun
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 027 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int patch-int -- set interface patch-int type=patch options:peer=patch-tun
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 035 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun patch-tun -- set interface patch-tun type=patch options:peer=patch-int
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 036 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["name","==","patch-tun"]],"op":"select"}],"method":"transact","id":616159}, "response":{"id":616159,"result":[{"rows":[{"options":["map",[["peer","patch-int"]]],"mtu":["set",[]],"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"56:71:96:55:88:6d","ingress_policing_rate":0,"ofport":1,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":["set",[]],"external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":["set",[]],"name":"patch-tun","type":"patch","cfm_remote_opstate":["set",[]],"_uuid":["uuid","769ea8a2-bfe3-4a48-9498-5ce38a96dcc4"],"status":["map",[]],"ifindex":0,"_version":["uuid","2001874c-9fa1-4749-af20-da6affac8b3f"],"other_config":["map",[]],"admin_state":["set",[]],"cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 046 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=1,actions=resubmit(,1)
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 050 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=0,actions=drop
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 054 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=01:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,19)
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 058 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=00:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,20)
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 062 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=0,actions=drop
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 067 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=3,priority=0,actions=drop
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 071 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=10,priority=1,actions=learn(table=20,hard_timeout=300,priority=1,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:0->NXM_OF_VLAN_TCI[],load:NXM_NX_TUN_ID[]->NXM_NX_TUN_ID[],output:NXM_OF_IN_PORT[]),output:1
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 074 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=0,actions=resubmit(,21)
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 078 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=20,priority=0,actions=resubmit(,21)
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 082 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=0,actions=drop
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 083 module:oputil,
 function:__exit__, router:openwrt3
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 083 module:ovsdb,
 function:crud, router:openwrt3
X-NLAN-Type: logger

CRUD operation (add): {'ovs_bridges': 'enabled'}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 084 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","uuid-name":"temp_276965","row":{"ovs_bridges":"enabled"},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["bridges","insert",["set",[["named-uuid","temp_276965"]]]]],"op":"mutate"}],"method":"transact","id":6864}, "response":{"id":6864,"result":[{"uuid":["uuid","fc70147e-a98c-4c40-b07b-a88dba489301"]},{"count":1}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 085 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","where":[],"op":"select"}],"method":"transact","id":299468}, "response":{"id":299468,"result":[{"rows":[{"_uuid":["uuid","fc70147e-a98c-4c40-b07b-a88dba489301"],"_version":["uuid","2681950d-be8e-40dc-98f8-13105bfd9488"],"ovs_bridges":"enabled","controller":["set",[]]}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 087 module:nlan_agent,
 function:_route, router:openwrt3
X-NLAN-Type: logger

function:vxlan.add, model:{'remote_ips': ['192.168.1.102', '192.168.1.101', '192.168.1.104'], 'local_ip': '192.168.1.103'}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 088 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":6490}, "response":{"id":6490,"result":[{"rows":[{"_uuid":["uuid","982278cc-2ecb-4fb1-b3df-0f27fabf7485"],"_version":["uuid","bb06a95e-2410-4529-9ed6-ae65a17a069e"],"gateway":["set",[]],"bridges":["uuid","fc70147e-a98c-4c40-b07b-a88dba489301"],"subnets":["set",[]],"vxlan":["set",[]],"services":["set",[]]}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 090 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","where":[],"op":"select"}],"method":"transact","id":291741}, "response":{"id":291741,"result":[{"rows":[]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 091 module:oputil,
 function:__enter__, router:openwrt3
X-NLAN-Type: logger

CRUD.params()
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 091 module:vxlan, function:add,
 router:openwrt3
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001102
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 102 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001102 -- set interface 192168001102 type=vxlan options:in_key=flow options:local_ip=192.168.1.103 options:out_key=flow options:remote_ip=192.168.1.102
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 103 module:vxlan, function:add,
 router:openwrt3
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001101
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 112 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001101 -- set interface 192168001101 type=vxlan options:in_key=flow options:local_ip=192.168.1.103 options:out_key=flow options:remote_ip=192.168.1.101
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 113 module:vxlan, function:add,
 router:openwrt3
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001104
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 122 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001104 -- set interface 192168001104 type=vxlan options:in_key=flow options:local_ip=192.168.1.103 options:out_key=flow options:remote_ip=192.168.1.104
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 123 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":275144}, "response":{"id":275144,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 129 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=3,actions=resubmit(,2)
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 133 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=2,actions=resubmit(,2)
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 137 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=4,actions=resubmit(,2)
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 137 module:oputil,
 function:__exit__, router:openwrt3
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 137 module:ovsdb,
 function:crud, router:openwrt3
X-NLAN-Type: logger

CRUD operation (add): {'remote_ips': ['192.168.1.102', '192.168.1.101', '192.168.1.104'], 'local_ip': '192.168.1.103'}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 138 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","uuid-name":"temp_164008","row":{"remote_ips":["set",["192.168.1.102","192.168.1.101","192.168.1.104"]],"local_ip":"192.168.1.103"},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["vxlan","insert",["set",[["named-uuid","temp_164008"]]]]],"op":"mutate"}],"method":"transact","id":334500}, "response":{"id":334500,"result":[{"uuid":["uuid","f7a4f51f-9ade-42a6-a03c-d921d35dc85a"]},{"count":1}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 139 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","where":[],"op":"select"}],"method":"transact","id":247781}, "response":{"id":247781,"result":[{"rows":[{"_version":["uuid","d0ce6662-fe4a-4c4e-8f5a-e52b4252dbab"],"_uuid":["uuid","f7a4f51f-9ade-42a6-a03c-d921d35dc85a"],"local_ip":"192.168.1.103","remote_ips":["set",["192.168.1.101","192.168.1.102","192.168.1.104"]]}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 147 module:nlan_agent,
 function:_route, router:openwrt3
X-NLAN-Type: logger

function:subnets.add, index:['vni', 1], model:{'peers': ['192.168.1.101', '192.168.1.102'], 'vid': 2, 'ip_vhost': '192.168.100.103/24', 'default_gw': '192.168.100.1', 'ip_dvr': OrderedDict([('addr', '192.168.100.3/24'), ('mode', 'dvr')]), 'vni': 1}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 148 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":98177}, "response":{"id":98177,"result":[{"rows":[{"_uuid":["uuid","982278cc-2ecb-4fb1-b3df-0f27fabf7485"],"_version":["uuid","fc438136-db31-4d2d-8350-1ea715eba631"],"gateway":["set",[]],"bridges":["uuid","fc70147e-a98c-4c40-b07b-a88dba489301"],"subnets":["set",[]],"vxlan":["uuid","f7a4f51f-9ade-42a6-a03c-d921d35dc85a"],"services":["set",[]]}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 150 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1]],"op":"select"}],"method":"transact","id":572397}, "response":{"id":572397,"result":[{"rows":[]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 151 module:oputil,
 function:__enter__, router:openwrt3
X-NLAN-Type: logger

CRUD.params()
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 151 module:subnets,
 function:add, router:openwrt3
X-NLAN-Type: logger

Adding a subnet(vlan): 2
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 156 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addbr br1
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 172 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br1 tag=2 -- set interface int_br1 type=internal
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 190 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr1 tag=2 -- set interface int_dvr1 type=internal
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 196 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addif br1 int_br1
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 198 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_br1 promisc on
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 202 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_br1 up
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 204 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_dvr1 up
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 209 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev br1 up
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 213 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns add ns1
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 220 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link add veth-ns1 type veth peer name temp-ns1
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 224 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev temp-ns1 netns ns1
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 229 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip link set dev temp-ns1 name eth0
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 234 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addif br1 veth-ns1
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 239 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 promisc on
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 248 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 up
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 252 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip link set dev eth0 up
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 254 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip addr add dev eth0 192.168.100.103/24
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 256 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip route add default via 192.168.100.3 dev eth0
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 257 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr1 192.168.100.3/24
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 259 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
10.0.2.0        *               255.255.255.0   U     0      0        0 eth0
192.168.1.0     *               255.255.255.0   U     0      0        0 eth2
192.168.56.0    *               255.255.255.0   U     0      0        0 eth1
192.168.100.0   *               255.255.255.0   U     0      0        0 int_dvr1

--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 260 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip route add default via 192.168.100.1
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 261 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":695747}, "response":{"id":695747,"result":[{"rows":[]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 265 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=1,actions=mod_vlan_vid:2,resubmit(,10)
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 269 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=1,dl_type=0x0806,dl_vlan=2,nw_dst=192.168.100.3,actions=drop
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 270 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":758044}, "response":{"id":758044,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 277 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=2,actions=strip_vlan,set_tunnel:1,output:3,output:2
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 278 module:oputil,
 function:__exit__, router:openwrt3
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 278 module:ovsdb,
 function:crud, router:openwrt3
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.101', '192.168.1.102'], 'vid': 2, 'ip_vhost': '192.168.100.103/24', 'default_gw': '192.168.100.1', 'ip_dvr': OrderedDict([('addr', '192.168.100.3/24'), ('mode', 'dvr')]), 'vni': 1}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 279 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_960066","row":{"peers":["set",["192.168.1.101","192.168.1.102"]],"vid":2,"ip_vhost":"192.168.100.103/24","default_gw":"192.168.100.1","ip_dvr":["map",[["addr","192.168.100.3/24"],["mode","dvr"]]],"vni":1},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_960066"]]]]],"op":"mutate"}],"method":"transact","id":587316}, "response":{"id":587316,"result":[{"uuid":["uuid","53dd521a-68ba-4951-9400-126339212153"]},{"count":1}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 280 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1]],"op":"select"}],"method":"transact","id":772628}, "response":{"id":772628,"result":[{"rows":[{"peers":["set",["192.168.1.101","192.168.1.102"]],"_version":["uuid","47e6d2df-8d1d-48d4-83f5-dc1ec19bc4ba"],"ports":["set",[]],"vni":1,"vid":2,"_uuid":["uuid","53dd521a-68ba-4951-9400-126339212153"],"default_gw":"192.168.100.1","ip_vhost":"192.168.100.103/24","ip_dvr":["map",[["addr","192.168.100.3/24"],["mode","dvr"]]]}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 282 module:nlan_agent,
 function:_route, router:openwrt3
X-NLAN-Type: logger

function:subnets.add, index:['vni', 103], model:{'peers': ['192.168.1.101', '192.168.1.102'], 'vid': 3, 'ip_vhost': '10.0.3.103/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr')])}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 283 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":666521}, "response":{"id":666521,"result":[{"rows":[{"_uuid":["uuid","982278cc-2ecb-4fb1-b3df-0f27fabf7485"],"_version":["uuid","13006dad-3d78-4851-bd20-1a20c16765ef"],"gateway":["set",[]],"bridges":["uuid","fc70147e-a98c-4c40-b07b-a88dba489301"],"subnets":["uuid","53dd521a-68ba-4951-9400-126339212153"],"vxlan":["uuid","f7a4f51f-9ade-42a6-a03c-d921d35dc85a"],"services":["set",[]]}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 285 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",103]],"op":"select"}],"method":"transact","id":900825}, "response":{"id":900825,"result":[{"rows":[]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 286 module:oputil,
 function:__enter__, router:openwrt3
X-NLAN-Type: logger

CRUD.params()
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 286 module:subnets,
 function:add, router:openwrt3
X-NLAN-Type: logger

Adding a subnet(vlan): 3
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 291 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addbr br103
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 308 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br103 tag=3 -- set interface int_br103 type=internal
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 324 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr103 tag=3 -- set interface int_dvr103 type=internal
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 328 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addif br103 int_br103
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 332 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_br103 promisc on
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 333 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_br103 up
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 335 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_dvr103 up
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 339 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev br103 up
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 342 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns add ns103
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 348 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link add veth-ns103 type veth peer name temp-ns103
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 354 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev temp-ns103 netns ns103
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 356 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip link set dev temp-ns103 name eth0
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 359 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addif br103 veth-ns103
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 362 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 promisc on
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 370 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 up
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 375 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip link set dev eth0 up
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 378 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip addr add dev eth0 10.0.3.103/24
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 380 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip route add default via 10.0.3.1 dev eth0
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 382 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr103 10.0.3.1/24
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 383 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":270062}, "response":{"id":270062,"result":[{"rows":[]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 389 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=103,actions=mod_vlan_vid:3,resubmit(,10)
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 394 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=1,dl_type=0x0806,dl_vlan=3,nw_dst=10.0.3.1,actions=drop
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 397 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":979098}, "response":{"id":979098,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 402 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=3,actions=strip_vlan,set_tunnel:103,output:3,output:2
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 402 module:oputil,
 function:__exit__, router:openwrt3
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 403 module:ovsdb,
 function:crud, router:openwrt3
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.101', '192.168.1.102'], 'vid': 3, 'ip_vhost': '10.0.3.103/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr')])}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 404 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_288791","row":{"vni":103,"ip_dvr":["map",[["addr","10.0.3.1/24"],["mode","dvr"]]],"peers":["set",["192.168.1.101","192.168.1.102"]],"ip_vhost":"10.0.3.103/24","vid":3},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_288791"]]]]],"op":"mutate"}],"method":"transact","id":17049}, "response":{"id":17049,"result":[{"uuid":["uuid","84f0571f-0da0-4091-97d7-dcb6cd2e9061"]},{"count":1}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 405 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",103]],"op":"select"}],"method":"transact","id":507080}, "response":{"id":507080,"result":[{"rows":[{"peers":["set",["192.168.1.101","192.168.1.102"]],"_version":["uuid","1f7abe5a-3bad-4507-aa9d-9c75fedc8706"],"ports":["set",[]],"vni":103,"vid":3,"_uuid":["uuid","84f0571f-0da0-4091-97d7-dcb6cd2e9061"],"default_gw":["set",[]],"ip_vhost":"10.0.3.103/24","ip_dvr":["map",[["addr","10.0.3.1/24"],["mode","dvr"]]]}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 408 module:nlan_agent,
 function:_route, router:openwrt3
X-NLAN-Type: logger

function:subnets.add, index:['vni', 101], model:{'peers': ['192.168.1.102', '192.168.1.104'], 'vid': 1, 'ip_vhost': '10.0.1.103/24', 'vni': 101, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'spoke_dvr')])}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 409 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":821337}, "response":{"id":821337,"result":[{"rows":[{"_uuid":["uuid","982278cc-2ecb-4fb1-b3df-0f27fabf7485"],"_version":["uuid","57cb6154-49cf-4e99-af0d-010f4d544bc4"],"gateway":["set",[]],"bridges":["uuid","fc70147e-a98c-4c40-b07b-a88dba489301"],"subnets":["set",[["uuid","53dd521a-68ba-4951-9400-126339212153"],["uuid","84f0571f-0da0-4091-97d7-dcb6cd2e9061"]]],"vxlan":["uuid","f7a4f51f-9ade-42a6-a03c-d921d35dc85a"],"services":["set",[]]}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 412 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",101]],"op":"select"}],"method":"transact","id":861938}, "response":{"id":861938,"result":[{"rows":[]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 412 module:oputil,
 function:__enter__, router:openwrt3
X-NLAN-Type: logger

CRUD.params()
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 412 module:subnets,
 function:add, router:openwrt3
X-NLAN-Type: logger

Adding a subnet(vlan): 1
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 418 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addbr br101
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 436 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br101 tag=1 -- set interface int_br101 type=internal
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 455 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr101 tag=1 -- set interface int_dvr101 type=internal
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 460 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addif br101 int_br101
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 464 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_br101 promisc on
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 466 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_br101 up
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 467 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_dvr101 up
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 471 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev br101 up
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 475 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns add ns101
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 480 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link add veth-ns101 type veth peer name temp-ns101
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 485 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev temp-ns101 netns ns101
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 489 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip link set dev temp-ns101 name eth0
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 493 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addif br101 veth-ns101
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 498 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 promisc on
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 507 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 up
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 512 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip link set dev eth0 up
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 515 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip addr add dev eth0 10.0.1.103/24
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 517 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip route add default via 10.0.1.1 dev eth0
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 520 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr101 10.0.1.1/24
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 521 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":288924}, "response":{"id":288924,"result":[{"rows":[]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 525 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=101,actions=mod_vlan_vid:1,resubmit(,10)
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 527 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ip link show dev int_dvr101
44: int_dvr101: <BROADCAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UNKNOWN mode DEFAULT group default 
    link/ether 96:e5:5b:ea:29:62 brd ff:ff:ff:ff:ff:ff

--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 527 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["name","==","int_dvr101"]],"op":"select"}],"method":"transact","id":127433}, "response":{"id":127433,"result":[{"rows":[{"options":["map",[]],"mtu":1500,"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"96:e5:5b:ea:29:62","ingress_policing_rate":0,"ofport":7,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":"up","external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":2,"name":"int_dvr101","type":"internal","cfm_remote_opstate":["set",[]],"_uuid":["uuid","e19494fb-55e2-4b54-bf56-eed1147e0a86"],"status":["map",[["driver_name","openvswitch"]]],"ifindex":44,"_version":["uuid","275bfdf5-5260-4a95-b488-e3e1fc184d4c"],"other_config":["map",[]],"admin_state":"up","cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 534 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["name","==","int_br101"]],"op":"select"}],"method":"transact","id":632045}, "response":{"id":632045,"result":[{"rows":[{"options":["map",[]],"mtu":1500,"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"46:22:86:b3:bb:43","ingress_policing_rate":0,"ofport":6,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":"up","external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":2,"name":"int_br101","type":"internal","cfm_remote_opstate":["set",[]],"_uuid":["uuid","d6464a23-5292-4d0b-851d-ec45ad19bb46"],"status":["map",[["driver_name","openvswitch"]]],"ifindex":43,"_version":["uuid","4e164056-57fd-4291-b59e-185866a5c43a"],"other_config":["map",[]],"admin_state":"up","cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 543 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=2,in_port=6,dl_type=0x0800,nw_dst=10.0.1.0/24,actions=normal
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 547 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=6,dl_type=0x0800,nw_dst=10.0.0.0/8,actions=resubmit(,1)
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 551 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=6,dl_type=0x0800,nw_dst=172.16.0.0/12,actions=resubmit(,1)
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 555 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=6,dl_type=0x0800,nw_dst=192.168.0.0/16,actions=resubmit(,1)
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 560 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=7,dl_type=0x0806,nw_src=10.0.1.1,nw_proto=2,actions=drop
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 564 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=1,priority=0,in_port=6,actions=set_field:96:e5:5b:ea:29:62->dl_dst,output:7
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 565 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":481845}, "response":{"id":481845,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key"*** Response from router:rpi1,platform:debian
From nobody Thu May 29 01:39:19 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS"

--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: test/plain
Content-Description: Default out
X-NLAN-Type: default_out


--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:28, 342 module:nlan_agent,
 function:_init, router:rpi1
X-NLAN-Type: logger

NLAN Agent initialization completed
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 343 module:nlan_agent,
 function:_init, router:rpi1
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0x9672c2c>, 'share_dir': '/opt/nlan/share', 'router': 'rpi1', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'debian', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0x96802ec>, 'schema': 'ovsdb_nlan.schema'}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:28, 421 module:nlan_agent,
 function:_route, router:rpi1
X-NLAN-Type: logger

function:bridges.add, model:{'ovs_bridges': 'enabled'}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 431 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN", "where": [], "op": "select"}], "method": "transact", "id": 70028}, "response":{"id":70028,"result":[{"rows":[]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 431 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN", "row": {}, "op": "insert"}], "method": "transact", "id": 23149}, "response":{"id":23149,"result":[{"uuid":["uuid","899a472c-a273-4b26-9ff0-020476a6006c"]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 432 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Bridges", "where": [], "op": "select"}], "method": "transact", "id": 441446}, "response":{"id":441446,"result":[{"rows":[]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 432 module:oputil,
 function:__enter__, router:rpi1
X-NLAN-Type: logger

CRUD.params()
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:28, 432 module:bridges,
 function:add, router:rpi1
X-NLAN-Type: logger

Adding bridges: br-int and br-tun
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 447 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-int
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 469 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-tun
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 479 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl del-flows br-tun
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 495 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int patch-int -- set interface patch-int type=patch options:peer=patch-tun
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 507 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun patch-tun -- set interface patch-tun type=patch options:peer=patch-int
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 508 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "Interface", "where": [["name", "==", "patch-tun"]], "op": "select"}], "method": "transact", "id": 744334}, "response":{"id":744334,"result":[{"rows":[{"options":["map",[["peer","patch-int"]]],"mtu":["set",[]],"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"c6:41:93:8b:73:f2","ingress_policing_rate":0,"ofport":1,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":["set",[]],"external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":["set",[]],"name":"patch-tun","type":"patch","cfm_remote_opstate":["set",[]],"_uuid":["uuid","49671921-d1dc-456a-ad58-32be05f30f85"],"status":["map",[]],"ifindex":0,"_version":["uuid","fed32fab-b6b3-4033-886a-49b1fd37a4bc"],"other_config":["map",[]],"admin_state":["set",[]],"cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 515 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=1,actions=resubmit(,1)
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 519 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=0,actions=drop
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 525 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=01:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,19)
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 530 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=00:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,20)
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 535 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=0,actions=drop
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 540 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=3,priority=0,actions=drop
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 549 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=10,priority=1,actions=learn(table=20,hard_timeout=300,priority=1,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:0->NXM_OF_VLAN_TCI[],load:NXM_NX_TUN_ID[]->NXM_NX_TUN_ID[],output:NXM_OF_IN_PORT[]),output:1
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 553 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=0,actions=resubmit(,21)
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 559 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=20,priority=0,actions=resubmit(,21)
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 563 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=0,actions=drop
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 563 module:oputil,
 function:__exit__, router:rpi1
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 563 module:ovsdb,
 function:crud, router:rpi1
X-NLAN-Type: logger

CRUD operation (add): {'ovs_bridges': 'enabled'}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 564 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Bridges", "uuid-name": "temp_561091", "row": {"ovs_bridges": "enabled"}, "op": "insert"}, {"table": "NLAN", "where": [], "mutations": [["bridges", "insert", ["set", [["named-uuid", "temp_561091"]]]]], "op": "mutate"}], "method": "transact", "id": 347105}, "response":{"id":347105,"result":[{"uuid":["uuid","18526079-57ef-4e6c-8f30-92de269e5acb"]},{"count":1}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 564 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Bridges", "where": [], "op": "select"}], "method": "transact", "id": 999999}, "response":{"id":999999,"result":[{"rows":[{"_uuid":["uuid","18526079-57ef-4e6c-8f30-92de269e5acb"],"_version":["uuid","73b1550c-749d-4b6b-9c36-3883a72cb64a"],"ovs_bridges":"enabled","controller":["set",[]]}]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:28, 566 module:nlan_agent,
 function:_route, router:rpi1
X-NLAN-Type: logger

function:services.add, index:['name', 'snort1'], model:{'name': 'snort1', 'chain': ['mz.101', 'dmz.1001']}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 567 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN", "where": [], "op": "select"}], "method": "transact", "id": 822996}, "response":{"id":822996,"result":[{"rows":[{"_uuid":["uuid","899a472c-a273-4b26-9ff0-020476a6006c"],"_version":["uuid","0908530e-1523-4851-bcdf-4744c79a27b1"],"gateway":["set",[]],"bridges":["uuid","18526079-57ef-4e6c-8f30-92de269e5acb"],"subnets":["set",[]],"vxlan":["set",[]],"services":["set",[]]}]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 567 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Service", "where": [["name", "==", "snort1"]], "op": "select"}], "method": "transact", "id": 691652}, "response":{"id":691652,"result":[{"rows":[]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 568 module:oputil,
 function:__enter__, router:rpi1
X-NLAN-Type: logger

CRUD.params()
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 571 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: lxc-stop -n snort1
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 573 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: lxc-start -d -f /var/lib/lxc/snort1/config_nlan -n snort1
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 573 module:oputil,
 function:__exit__, router:rpi1
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 573 module:ovsdb,
 function:crud, router:rpi1
X-NLAN-Type: logger

CRUD operation (add): {'name': 'snort1', 'chain': ['mz.101', 'dmz.1001']}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 574 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Service", "uuid-name": "temp_665602", "row": {"name": "snort1", "chain": ["set", ["mz.101", "dmz.1001"]]}, "op": "insert"}, {"table": "NLAN", "where": [], "mutations": [["services", "insert", ["set", [["named-uuid", "temp_665602"]]]]], "op": "mutate"}], "method": "transact", "id": 320615}, "response":{"id":320615,"result":[{"uuid":["uuid","ab0de034-63b3-4051-a7b0-e70b531b5915"]},{"count":1}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 575 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Service", "where": [["name", "==", "snort1"]], "op": "select"}], "method": "transact", "id": 854973}, "response":{"id":854973,"result":[{"rows":[{"_version":["uuid","ed7345d0-bdaa-47c1-98df-13b242867fb6"],"_uuid":["uuid","ab0de034-63b3-4051-a7b0-e70b531b5915"],"chain":["set",["dmz.1001","mz.101"]],"name":"snort1"}]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:28, 576 module:nlan_agent,
 function:_route, router:rpi1
X-NLAN-Type: logger

function:vxlan.add, model:{'remote_ips': ['192.168.1.103', '192.168.1.102', '192.168.1.101'], 'local_ip': '192.168.1.104'}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 577 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN", "where": [], "op": "select"}], "method": "transact", "id": 954660}, "response":{"id":954660,"result":[{"rows":[{"_uuid":["uuid","899a472c-a273-4b26-9ff0-020476a6006c"],"_version":["uuid","1499b26f-b155-487b-bc87-84dd5a280d0e"],"gateway":["set",[]],"bridges":["uuid","18526079-57ef-4e6c-8f30-92de269e5acb"],"subnets":["set",[]],"vxlan":["set",[]],"services":["uuid","ab0de034-63b3-4051-a7b0-e70b531b5915"]}]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 579 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_VXLAN", "where": [], "op": "select"}], "method": "transact", "id": 529162}, "response":{"id":529162,"result":[{"rows":[]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 579 module:oputil,
 function:__enter__, router:rpi1
X-NLAN-Type: logger

CRUD.params()
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:28, 579 module:vxlan, function:add,
 router:rpi1
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001103
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 611 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001103 -- set interface 192168001103 type=vxlan options:in_key=flow options:local_ip=192.168.1.104 options:out_key=flow options:remote_ip=192.168.1.103
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:28, 611 module:vxlan, function:add,
 router:rpi1
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001102
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 636 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001102 -- set interface 192168001102 type=vxlan options:in_key=flow options:local_ip=192.168.1.104 options:out_key=flow options:remote_ip=192.168.1.102
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:28, 636 module:vxlan, function:add,
 router:rpi1
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001101
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 656 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001101 -- set interface 192168001101 type=vxlan options:in_key=flow options:local_ip=192.168.1.104 options:out_key=flow options:remote_ip=192.168.1.101
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 657 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "Interface", "where": [["type", "==", "vxlan"]], "columns": ["ofport", "options"], "op": "select"}], "method": "transact", "id": 56081}, "response":{"id":56081,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":4},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2}]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 670 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=4,actions=resubmit(,2)
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 678 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=3,actions=resubmit(,2)
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 684 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=2,actions=resubmit(,2)
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 684 module:oputil,
 function:__exit__, router:rpi1
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 684 module:ovsdb,
 function:crud, router:rpi1
X-NLAN-Type: logger

CRUD operation (add): {'remote_ips': ['192.168.1.103', '192.168.1.102', '192.168.1.101'], 'local_ip': '192.168.1.104'}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 685 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_VXLAN", "uuid-name": "temp_920357", "row": {"remote_ips": ["set", ["192.168.1.103", "192.168.1.102", "192.168.1.101"]], "local_ip": "192.168.1.104"}, "op": "insert"}, {"table": "NLAN", "where": [], "mutations": [["vxlan", "insert", ["set", [["named-uuid", "temp_920357"]]]]], "op": "mutate"}], "method": "transact", "id": 408076}, "response":{"id":408076,"result":[{"uuid":["uuid","91312c93-341f-41c3-a016-9bac2418314b"]},{"count":1}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 685 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_VXLAN", "where": [], "op": "select"}], "method": "transact", "id": 456629}, "response":{"id":456629,"result":[{"rows":[{"_version":["uuid","8d248f00-52dd-435f-a0e8-4b2a50fd9e86"],"_uuid":["uuid","91312c93-341f-41c3-a016-9bac2418314b"],"local_ip":"192.168.1.104","remote_ips":["set",["192.168.1.101","192.168.1.102","192.168.1.103"]]}]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:28, 694 module:nlan_agent,
 function:_route, router:rpi1
X-NLAN-Type: logger

function:subnets.add, index:['vni', 1001], model:{'peers': ['192.168.1.101'], 'ports': ['dmz.1001'], 'vni': 1001, 'vid': 111}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 696 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN", "where": [], "op": "select"}], "method": "transact", "id": 352036}, "response":{"id":352036,"result":[{"rows":[{"_uuid":["uuid","899a472c-a273-4b26-9ff0-020476a6006c"],"_version":["uuid","ebb2a019-37c8-4b4b-a900-6231b3c3fef1"],"gateway":["set",[]],"bridges":["uuid","18526079-57ef-4e6c-8f30-92de269e5acb"],"subnets":["set",[]],"vxlan":["uuid","91312c93-341f-41c3-a016-9bac2418314b"],"services":["uuid","ab0de034-63b3-4051-a7b0-e70b531b5915"]}]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 698 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Subnet", "where": [["vni", "==", 1001]], "op": "select"}], "method": "transact", "id": 267790}, "response":{"id":267790,"result":[{"rows":[]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 699 module:oputil,
 function:__enter__, router:rpi1
X-NLAN-Type: logger

CRUD.params()
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:28, 699 module:subnets,
 function:add, router:rpi1
X-NLAN-Type: logger

Adding a subnet(vlan): 111
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 707 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: brctl addbr br1001
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 735 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br1001 tag=111 -- set interface int_br1001 type=internal
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 769 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr1001 tag=111 -- set interface int_dvr1001 type=internal
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 778 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: brctl addif br1001 int_br1001
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 783 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev int_br1001 promisc on
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 793 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev int_br1001 up
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 798 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev int_dvr1001 up
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 806 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev br1001 up
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 812 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: brctl addif br1001 dmz.1001
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 814 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "Controller", "where": [], "columns": ["target"], "op": "select"}], "method": "transact", "id": 513809}, "response":{"id":513809,"result":[{"rows":[]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 824 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=1001,actions=mod_vlan_vid:111,resubmit(,10)
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 826 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "Interface", "where": [["type", "==", "vxlan"]], "columns": ["ofport", "options"], "op": "select"}], "method": "transact", "id": 30835}, "response":{"id":30835,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":4},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2}]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 834 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=111,actions=strip_vlan,set_tunnel:1001,output:4
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 834 module:oputil,
 function:__exit__, router:rpi1
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 834 module:ovsdb,
 function:crud, router:rpi1
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.101'], 'ports': ['dmz.1001'], 'vni': 1001, 'vid': 111}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 835 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Subnet", "uuid-name": "temp_740176", "row": {"peers": ["set", ["192.168.1.101"]], "ports": ["set", ["dmz.1001"]], "vni": 1001, "vid": 111}, "op": "insert"}, {"table": "NLAN", "where": [], "mutations": [["subnets", "insert", ["set", [["named-uuid", "temp_740176"]]]]], "op": "mutate"}], "method": "transact", "id": 589325}, "response":{"id":589325,"result":[{"uuid":["uuid","6813ae8b-8e8c-4541-bf3f-e67508fdf399"]},{"count":1}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 836 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Subnet", "where": [["vni", "==", 1001]], "op": "select"}], "method": "transact", "id": 831730}, "response":{"id":831730,"result":[{"rows":[{"peers":"192.168.1.101","_version":["uuid","a61351e4-9b63-4ac9-8e8e-5ec142db45c0"],"ports":"dmz.1001","vni":1001,"vid":111,"_uuid":["uuid","6813ae8b-8e8c-4541-bf3f-e67508fdf399"],"default_gw":["set",[]],"ip_vhost":["set",[]],"ip_dvr":["map",[]]}]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:28, 836 module:nlan_agent,
 function:_route, router:rpi1
X-NLAN-Type: logger

function:subnets.add, index:['vni', 101], model:{'peers': ['192.168.1.102', '192.168.1.103'], 'ports': ['mz.101'], 'vni': 101, 'vid': 1}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 836 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN", "where": [], "op": "select"}], "method": "transact", "id": 826106}, "response":{"id":826106,"result":[{"rows":[{"_uuid":["uuid","899a472c-a273-4b26-9ff0-020476a6006c"],"_version":["uuid","61fa0035-8468-4b4b-b05b-2343702abf5c"],"gateway":["set",[]],"bridges":["uuid","18526079-57ef-4e6c-8f30-92de269e5acb"],"subnets":["uuid","6813ae8b-8e8c-4541-bf3f-e67508fdf399"],"vxlan":["uuid","91312c93-341f-41c3-a016-9bac2418314b"],"services":["uuid","ab0de034-63b3-4051-a7b0-e70b531b5915"]}]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 837 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Subnet", "where": [["vni", "==", 101]], "op": "select"}], "method": "transact", "id": 820121}, "response":{"id":820121,"result":[{"rows":[]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 838 module:oputil,
 function:__enter__, router:rpi1
X-NLAN-Type: logger

CRUD.params()
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:28, 838 module:subnets,
 function:add, router:rpi1
X-NLAN-Type: logger

Adding a subnet(vlan): 1
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 845 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: brctl addbr br101
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 875 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br101 tag=1 -- set interface int_br101 type=internal
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 905 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr101 tag=1 -- set interface int_dvr101 type=internal
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 912 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: brctl addif br101 int_br101
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 917 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev int_br101 promisc on
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 923 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev int_br101 up
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 936 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev int_dvr101 up
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 940 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev br101 up
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 947 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: brctl addif br101 mz.101
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 948 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "Controller", "where": [], "columns": ["target"], "op": "select"}], "method": "transact", "id": 217054}, "response":{"id":217054,"result":[{"rows":[]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 956 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=101,actions=mod_vlan_vid:1,resubmit(,10)
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 956 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "Interface", "where": [["type", "==", "vxlan"]], "columns": ["ofport", "options"], "op": "select"}], "method": "transact", "id": 199057}, "response":{"id":199057,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":4},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2}]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 966 module:cmdutil,
 function:log, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=1,actions=strip_vlan,set_tunnel:101,output:3,output:2
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 966 module:oputil,
 function:__exit__, router:rpi1
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 01:39:28, 966 module:ovsdb,
 function:crud, router:rpi1
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.102', '192.168.1.103'], 'ports': ['mz.101'], 'vni': 101, 'vid': 1}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 966 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Subnet", "uuid-name": "temp_610204", "row": {"peers": ["set", ["192.168.1.102", "192.168.1.103"]], "ports": ["set", ["mz.101"]], "vni": 101, "vid": 1}, ,"flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 571 module:cmdutil,
 function:log, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=1,actions=strip_vlan,set_tunnel:101,output:2,output:4
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 571 module:oputil,
 function:__exit__, router:openwrt3
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:08, 571 module:ovsdb,
 function:crud, router:openwrt3
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.102', '192.168.1.104'], 'vid': 1, 'ip_vhost': '10.0.1.103/24', 'vni': 101, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'spoke_dvr')])}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 572 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_371563","row":{"vni":101,"ip_dvr":["map",[["addr","10.0.1.1/24"],["mode","spoke_dvr"]]],"peers":["set",["192.168.1.102","192.168.1.104"]],"ip_vhost":"10.0.1.103/24","vid":1},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_371563"]]]]],"op":"mutate"}],"method":"transact","id":753998}, "response":{"id":753998,"result":[{"uuid":["uuid","cb95c25c-89be-4fe1-a512-1933a4f65cb6"]},{"count":1}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:08, 573 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",101]],"op":"select"}],"method":"transact","id":169404}, "response":{"id":169404,"result":[{"rows":[{"peers":["set",["192.168.1.102","192.168.1.104"]],"_version":["uuid","bd7b6386-5004-4e87-83dc-1eccc1908405"],"ports":["set",[]],"vni":101,"vid":1,"_uuid":["uuid","cb95c25c-89be-4fe1-a512-1933a4f65cb6"],"default_gw":["set",[]],"ip_vhost":"10.0.1.103/24","ip_dvr":["map",[["addr","10.0.1.1/24"],["mode","spoke_dvr"]]]}]}],"error":null}}
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: application/x-nlan
Content-Description: NLAN Response
X-NLAN-Type: nlan_response

OrderedDict([('message', 'Execution completed'), ('exit', 0)])
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:08, 575 module:nlan_agent,
 function:<module>, router:openwrt3
X-NLAN-Type: logger

NLAN Agent execution completed
--tCqjqXnboWQ6Tb0eJNRrnE4wpx7N6YaW--


"op": "insert"}, {"table": "NLAN", "where": [], "mutations": [["subnets", "insert", ["set", [["named-uuid", "temp_610204"]]]]], "op": "mutate"}], "method": "transact", "id": 540354}, "response":{"id":540354,"result":[{"uuid":["uuid","b3890a85-72aa-420b-9234-23174fdbd761"]},{"count":1}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 01:39:28, 967 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Subnet", "where": [["vni", "==", 101]], "op": "select"}], "method": "transact", "id": 173364}, "response":{"id":173364,"result":[{"rows":[{"peers":["set",["192.168.1.102","192.168.1.103"]],"_version":["uuid","47ea0cf3-014a-4e52-b046-46b153583efb"],"ports":"mz.101","vni":101,"vid":1,"_uuid":["uuid","b3890a85-72aa-420b-9234-23174fdbd761"],"default_gw":["set",[]],"ip_vhost":["set",[]],"ip_dvr":["map",[]]}]}],"error":null}}
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: application/x-nlan
Content-Description: NLAN Response
X-NLAN-Type: nlan_response

OrderedDict([('message', 'Execution completed'), ('exit', 0)])
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 01:39:28, 967 module:nlan_agent,
 function:<module>, router:rpi1
X-NLAN-Type: logger

NLAN Agent execution completed
--Bj4iwKKDy6M2HpdxWDuRgU08fLdVYJgS--


*** Response from router:openwrt1,platform:openwrt
From nobody Thu May 29 01:39:33 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m"

--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: test/plain
Content-Description: Default out
X-NLAN-Type: default_out


--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:09, 405 module:nlan_agent,
 function:_init, router:openwrt1
X-NLAN-Type: logger

NLAN Agent initialization completed
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 406 module:nlan_agent,
 function:_init, router:openwrt1
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0xb74ddecc>, 'share_dir': '/opt/nlan/share', 'router': 'openwrt1', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'openwrt', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0xb74e158c>, 'schema': 'ovsdb_nlan.schema'}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:09, 454 module:nlan_agent,
 function:_route, router:openwrt1
X-NLAN-Type: logger

function:bridges.add, model:{'ovs_bridges': 'enabled'}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:09, 458 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":198253}, "response":{"id":198253,"result":[{"rows":[]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:09, 459 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","row":{},"op":"insert"}],"method":"transact","id":820009}, "response":{"id":820009,"result":[{"uuid":["uuid","a5f1f423-1088-449e-af25-778894d69c5e"]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:09, 460 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","where":[],"op":"select"}],"method":"transact","id":734357}, "response":{"id":734357,"result":[{"rows":[]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 461 module:oputil,
 function:__enter__, router:openwrt1
X-NLAN-Type: logger

CRUD.params()
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:09, 461 module:bridges,
 function:add, router:openwrt1
X-NLAN-Type: logger

Adding bridges: br-int and br-tun
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 472 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-int
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 489 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-tun
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 494 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl del-flows br-tun
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 502 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int patch-int -- set interface patch-int type=patch options:peer=patch-tun
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 510 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun patch-tun -- set interface patch-tun type=patch options:peer=patch-int
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:09, 511 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["name","==","patch-tun"]],"op":"select"}],"method":"transact","id":322546}, "response":{"id":322546,"result":[{"rows":[{"options":["map",[["peer","patch-int"]]],"mtu":["set",[]],"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"de:45:43:a9:20:01","ingress_policing_rate":0,"ofport":1,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":["set",[]],"external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":["set",[]],"name":"patch-tun","type":"patch","cfm_remote_opstate":["set",[]],"_uuid":["uuid","3942803b-b0c8-4545-b45d-89f01153587b"],"status":["map",[]],"ifindex":0,"_version":["uuid","bbcb6323-ea59-4770-b2a3-8c5515af973e"],"other_config":["map",[]],"admin_state":["set",[]],"cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 525 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=1,actions=resubmit(,1)
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 529 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=0,actions=drop
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 533 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=01:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,19)
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 537 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=00:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,20)
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 542 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=0,actions=drop
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 546 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=3,priority=0,actions=drop
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 550 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=10,priority=1,actions=learn(table=20,hard_timeout=300,priority=1,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:0->NXM_OF_VLAN_TCI[],load:NXM_NX_TUN_ID[]->NXM_NX_TUN_ID[],output:NXM_OF_IN_PORT[]),output:1
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 554 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=0,actions=resubmit(,21)
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 558 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=20,priority=0,actions=resubmit(,21)
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 561 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=0,actions=drop
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 562 module:oputil,
 function:__exit__, router:openwrt1
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 562 module:ovsdb,
 function:crud, router:openwrt1
X-NLAN-Type: logger

CRUD operation (add): {'ovs_bridges': 'enabled'}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:09, 563 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","uuid-name":"temp_141588","row":{"ovs_bridges":"enabled"},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["bridges","insert",["set",[["named-uuid","temp_141588"]]]]],"op":"mutate"}],"method":"transact","id":853310}, "response":{"id":853310,"result":[{"uuid":["uuid","0e26f03f-6db8-4b51-b32f-6199fb150247"]},{"count":1}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:09, 564 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","where":[],"op":"select"}],"method":"transact","id":545575}, "response":{"id":545575,"result":[{"rows":[{"_uuid":["uuid","0e26f03f-6db8-4b51-b32f-6199fb150247"],"_version":["uuid","4af138c4-5de3-4dd9-9fd6-8deea4582145"],"ovs_bridges":"enabled","controller":["set",[]]}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:09, 567 module:nlan_agent,
 function:_route, router:openwrt1
X-NLAN-Type: logger

function:gateway.add, model:{'network': 'eth2', 'rip': 'enabled'}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:09, 568 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":527019}, "response":{"id":527019,"result":[{"rows":[{"_uuid":["uuid","a5f1f423-1088-449e-af25-778894d69c5e"],"_version":["uuid","859323c1-ee3f-4f87-b2e0-963f3ce1e27d"],"gateway":["set",[]],"bridges":["uuid","0e26f03f-6db8-4b51-b32f-6199fb150247"],"subnets":["set",[]],"vxlan":["set",[]],"services":["set",[]]}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:09, 570 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Gateway","where":[],"op":"select"}],"method":"transact","id":4033}, "response":{"id":4033,"result":[{"rows":[]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 570 module:oputil,
 function:__enter__, router:openwrt1
X-NLAN-Type: logger

CRUD.params()
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:09, 571 module:gateway,
 function:add, router:openwrt1
X-NLAN-Type: logger

Adding a gateway router: rip
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 606 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: vtysh -c configure terminal -c interface eth2 -c link-detect -c exit -c router rip -c version 2 -c redistribute connected -c network eth2 -c exit -c exit -c write -c exit
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 640 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/quagga start
quagga.init: Starting zebra ... done.
quagga.init: Starting ripd ... done.

--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:09, 685 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: vtysh -c configure terminal -c interface eth2 -c link-detect -c exit -c router rip -c version 2 -c redistribute connected -c network eth2 -c exit -c exit -c write -c exit
There is a same network configuration eth2
Building Configuration...
Configuration saved to /etc/quagga/zebra.conf
Configuration saved to /etc/quagga/ripd.conf
[OK]

--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 733 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/quagga restart
quagga.init: Stopping ripd ... killed 2751 ... done.
quagga.init: Stopping zebra ... killed 2747 ... done.
quagga.init: Starting zebra ... done.
quagga.init: Starting ripd ... done.

--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 733 module:oputil,
 function:__exit__, router:openwrt1
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 733 module:ovsdb,
 function:crud, router:openwrt1
X-NLAN-Type: logger

CRUD operation (add): {'network': 'eth2', 'rip': 'enabled'}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:11, 734 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Gateway","uuid-name":"temp_91918","row":{"network":"eth2","rip":"enabled"},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["gateway","insert",["set",[["named-uuid","temp_91918"]]]]],"op":"mutate"}],"method":"transact","id":471652}, "response":{"id":471652,"result":[{"uuid":["uuid","124f6201-f7b0-4e98-b2d7-3698fb45fcdd"]},{"count":1}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:11, 735 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Gateway","where":[],"op":"select"}],"method":"transact","id":620723}, "response":{"id":620723,"result":[{"rows":[{"_version":["uuid","c00920bd-c2a1-4573-acd7-b0f174148225"],"network":"eth2","_uuid":["uuid","124f6201-f7b0-4e98-b2d7-3698fb45fcdd"],"rip":"enabled"}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:11, 736 module:nlan_agent,
 function:_route, router:openwrt1
X-NLAN-Type: logger

function:vxlan.add, model:{'remote_ips': ['192.168.1.103', '192.168.1.102', '192.168.1.104'], 'local_ip': '192.168.1.101'}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:11, 737 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":711456}, "response":{"id":711456,"result":[{"rows":[{"_uuid":["uuid","a5f1f423-1088-449e-af25-778894d69c5e"],"_version":["uuid","f8862336-9c6f-47a3-8fa7-b0a10d9d73c1"],"gateway":["uuid","124f6201-f7b0-4e98-b2d7-3698fb45fcdd"],"bridges":["uuid","0e26f03f-6db8-4b51-b32f-6199fb150247"],"subnets":["set",[]],"vxlan":["set",[]],"services":["set",[]]}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:11, 739 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","where":[],"op":"select"}],"method":"transact","id":971592}, "response":{"id":971592,"result":[{"rows":[]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 739 module:oputil,
 function:__enter__, router:openwrt1
X-NLAN-Type: logger

CRUD.params()
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:11, 739 module:vxlan, function:add,
 router:openwrt1
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001103
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 745 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001103 -- set interface 192168001103 type=vxlan options:in_key=flow options:local_ip=192.168.1.101 options:out_key=flow options:remote_ip=192.168.1.103
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:11, 745 module:vxlan, function:add,
 router:openwrt1
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001102
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 753 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001102 -- set interface 192168001102 type=vxlan options:in_key=flow options:local_ip=192.168.1.101 options:out_key=flow options:remote_ip=192.168.1.102
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:11, 753 module:vxlan, function:add,
 router:openwrt1
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001104
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 760 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001104 -- set interface 192168001104 type=vxlan options:in_key=flow options:local_ip=192.168.1.101 options:out_key=flow options:remote_ip=192.168.1.104
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:11, 760 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":564910}, "response":{"id":564910,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 764 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=3,actions=resubmit(,2)
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 767 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=2,actions=resubmit(,2)
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 769 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=4,actions=resubmit(,2)
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 769 module:oputil,
 function:__exit__, router:openwrt1
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 769 module:ovsdb,
 function:crud, router:openwrt1
X-NLAN-Type: logger

CRUD operation (add): {'remote_ips': ['192.168.1.103', '192.168.1.102', '192.168.1.104'], 'local_ip': '192.168.1.101'}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:11, 771 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","uuid-name":"temp_679523","row":{"remote_ips":["set",["192.168.1.103","192.168.1.102","192.168.1.104"]],"local_ip":"192.168.1.101"},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["vxlan","insert",["set",[["named-uuid","temp_679523"]]]]],"op":"mutate"}],"method":"transact","id":257155}, "response":{"id":257155,"result":[{"uuid":["uuid","cbab1c77-96b5-4a5f-a4ac-778ac32e62dc"]},{"count":1}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:11, 771 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","where":[],"op":"select"}],"method":"transact","id":812210}, "response":{"id":812210,"result":[{"rows":[{"_version":["uuid","a210469f-4951-4797-94db-81565a84c196"],"_uuid":["uuid","cbab1c77-96b5-4a5f-a4ac-778ac32e62dc"],"local_ip":"192.168.1.101","remote_ips":["set",["192.168.1.102","192.168.1.103","192.168.1.104"]]}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:11, 775 module:nlan_agent,
 function:_route, router:openwrt1
X-NLAN-Type: logger

function:subnets.add, index:['vni', 1], model:{'peers': ['192.168.1.102', '192.168.1.103'], 'vid': 2, 'ip_vhost': '192.168.100.101/24', 'vni': 1, 'ip_dvr': OrderedDict([('addr', '192.168.100.1/24'), ('mode', 'dvr')])}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:11, 776 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":509858}, "response":{"id":509858,"result":[{"rows":[{"_uuid":["uuid","a5f1f423-1088-449e-af25-778894d69c5e"],"_version":["uuid","a8e33440-f6e2-4c6b-ad9d-9d59161723d1"],"gateway":["uuid","124f6201-f7b0-4e98-b2d7-3698fb45fcdd"],"bridges":["uuid","0e26f03f-6db8-4b51-b32f-6199fb150247"],"subnets":["set",[]],"vxlan":["uuid","cbab1c77-96b5-4a5f-a4ac-778ac32e62dc"],"services":["set",[]]}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:11, 777 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1]],"op":"select"}],"method":"transact","id":4611}, "response":{"id":4611,"result":[{"rows":[]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 778 module:oputil,
 function:__enter__, router:openwrt1
X-NLAN-Type: logger

CRUD.params()
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:11, 778 module:subnets,
 function:add, router:openwrt1
X-NLAN-Type: logger

Adding a subnet(vlan): 2
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 782 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addbr br1
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 792 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br1 tag=2 -- set interface int_br1 type=internal
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 803 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr1 tag=2 -- set interface int_dvr1 type=internal
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 805 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addif br1 int_br1
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 808 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_br1 promisc on
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 809 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_br1 up
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 811 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_dvr1 up
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 814 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev br1 up
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 816 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns add ns1
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 820 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link add veth-ns1 type veth peer name temp-ns1
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 823 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev temp-ns1 netns ns1
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 826 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip link set dev temp-ns1 name eth0
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 829 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addif br1 veth-ns1
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 833 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 promisc on
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 837 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 up
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 840 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip link set dev eth0 up
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 841 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip addr add dev eth0 192.168.100.101/24
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 843 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip route add default via 192.168.100.1 dev eth0
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 846 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr1 192.168.100.1/24
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:11, 846 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":41314}, "response":{"id":41314,"result":[{"rows":[]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 849 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=1,actions=mod_vlan_vid:2,resubmit(,10)
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 852 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=1,dl_type=0x0806,dl_vlan=2,nw_dst=192.168.100.1,actions=drop
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:11, 853 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":963664}, "response":{"id":963664,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 856 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=2,actions=strip_vlan,set_tunnel:1,output:3,output:2
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 857 module:oputil,
 function:__exit__, router:openwrt1
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 857 module:ovsdb,
 function:crud, router:openwrt1
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.102', '192.168.1.103'], 'vid': 2, 'ip_vhost': '192.168.100.101/24', 'vni': 1, 'ip_dvr': OrderedDict([('addr', '192.168.100.1/24'), ('mode', 'dvr')])}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:11, 857 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_916242","row":{"vni":1,"ip_dvr":["map",[["addr","192.168.100.1/24"],["mode","dvr"]]],"peers":["set",["192.168.1.102","192.168.1.103"]],"ip_vhost":"192.168.100.101/24","vid":2},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_916242"]]]]],"op":"mutate"}],"method":"transact","id":944169}, "response":{"id":944169,"result":[{"uuid":["uuid","56f1e8a7-ad4c-40d4-b38f-2b232d7b0c01"]},{"count":1}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:11, 858 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1]],"op":"select"}],"method":"transact","id":30360}, "response":{"id":30360,"result":[{"rows":[{"peers":["set",["192.168.1.102","192.168.1.103"]],"_version":["uuid","5d306a9d-5919-4783-8897-c7b5883df22b"],"ports":["set",[]],"vni":1,"vid":2,"_uuid":["uuid","56f1e8a7-ad4c-40d4-b38f-2b232d7b0c01"],"default_gw":["set",[]],"ip_vhost":"192.168.100.101/24","ip_dvr":["map",[["addr","192.168.100.1/24"],["mode","dvr"]]]}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:11, 860 module:nlan_agent,
 function:_route, router:openwrt1
X-NLAN-Type: logger

function:subnets.add, index:['vni', 103], model:{'peers': ['192.168.1.102', '192.168.1.103'], 'vid': 3, 'ip_vhost': '10.0.3.101/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr'), ('dhcp', 'enabled')])}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:11, 861 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":954960}, "response":{"id":954960,"result":[{"rows":[{"_uuid":["uuid","a5f1f423-1088-449e-af25-778894d69c5e"],"_version":["uuid","418ef8e4-e700-4769-9f3c-bad930d914c5"],"gateway":["uuid","124f6201-f7b0-4e98-b2d7-3698fb45fcdd"],"bridges":["uuid","0e26f03f-6db8-4b51-b32f-6199fb150247"],"subnets":["uuid","56f1e8a7-ad4c-40d4-b38f-2b232d7b0c01"],"vxlan":["uuid","cbab1c77-96b5-4a5f-a4ac-778ac32e62dc"],"services":["set",[]]}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:11, 862 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",103]],"op":"select"}],"method":"transact","id":648620}, "response":{"id":648620,"result":[{"rows":[]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 862 module:oputil,
 function:__enter__, router:openwrt1
X-NLAN-Type: logger

CRUD.params()
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:11, 862 module:subnets,
 function:add, router:openwrt1
X-NLAN-Type: logger

Adding a subnet(vlan): 3
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 866 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addbr br103
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 880 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br103 tag=3 -- set interface int_br103 type=internal
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 893 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr103 tag=3 -- set interface int_dvr103 type=internal
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 895 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addif br103 int_br103
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 897 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_br103 promisc on
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 899 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_br103 up
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 900 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_dvr103 up
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 903 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev br103 up
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 905 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns add ns103
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 910 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link add veth-ns103 type veth peer name temp-ns103
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 914 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev temp-ns103 netns ns103
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 916 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip link set dev temp-ns103 name eth0
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 920 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addif br103 veth-ns103
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 922 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 promisc on
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 927 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 up
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 930 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip link set dev eth0 up
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 932 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip addr add dev eth0 10.0.3.101/24
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 934 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip route add default via 10.0.3.1 dev eth0
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 936 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr103 10.0.3.1/24
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 937 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr103=interface
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 938 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr103.ifname=int_dvr103
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 939 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr103.proto=static
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 940 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr103.ipaddr=10.0.3.1
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 942 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr103.netmask=255.255.255.0
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 943 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr103=dhcp
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 944 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr103.interface=int_dvr103
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 946 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr103.start=100
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 948 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr103.limit=150
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 949 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr103.leasetime=12h
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:11, 957 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci commit
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:12, 984 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/network restart
Command failed: Not found

--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 073 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/dnsmasq restart
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:16, 073 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":811819}, "response":{"id":811819,"result":[{"rows":[]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 079 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=103,actions=mod_vlan_vid:3,resubmit(,10)
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 083 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=1,dl_type=0x0806,dl_vlan=3,nw_dst=10.0.3.1,actions=drop
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:16, 084 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":621888}, "response":{"id":621888,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 088 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=3,actions=strip_vlan,set_tunnel:103,output:3,output:2
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 088 module:oputil,
 function:__exit__, router:openwrt1
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 088 module:ovsdb,
 function:crud, router:openwrt1
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.102', '192.168.1.103'], 'vid': 3, 'ip_vhost': '10.0.3.101/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr'), ('dhcp', 'enabled')])}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:16, 089 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_548542","row":{"vni":103,"ip_dvr":["map",[["addr","10.0.3.1/24"],["mode","dvr"],["dhcp","enabled"]]],"peers":["set",["192.168.1.102","192.168.1.103"]],"ip_vhost":"10.0.3.101/24","vid":3},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_548542"]]]]],"op":"mutate"}],"method":"transact","id":894846}, "response":{"id":894846,"result":[{"uuid":["uuid","5c945ccf-5a43-401a-854d-882f4abc1e33"]},{"count":1}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:16, 090 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",103]],"op":"select"}],"method":"transact","id":808992}, "response":{"id":808992,"result":[{"rows":[{"peers":["set",["192.168.1.102","192.168.1.103"]],"_version":["uuid","6f47f4c9-d704-4350-926d-89c1be91fe92"],"ports":["set",[]],"vni":103,"vid":3,"_uuid":["uuid","5c945ccf-5a43-401a-854d-882f4abc1e33"],"default_gw":["set",[]],"ip_vhost":"10.0.3.101/24","ip_dvr":["map",[["addr","10.0.3.1/24"],["dhcp","enabled"],["mode","dvr"]]]}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:16, 091 module:nlan_agent,
 function:_route, router:openwrt1
X-NLAN-Type: logger

function:subnets.add, index:['vni', 1001], model:{'peers': ['192.168.1.104'], 'vid': 1, 'ip_vhost': '10.0.1.101/24', 'vni': 1001, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'hub'), ('dhcp', 'enabled')])}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:16, 091 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":41148}, "response":{"id":41148,"result":[{"rows":[{"_uuid":["uuid","a5f1f423-1088-449e-af25-778894d69c5e"],"_version":["uuid","c7ade7bd-43e3-4b5f-8359-dcbc30d94a75"],"gateway":["uuid","124f6201-f7b0-4e98-b2d7-3698fb45fcdd"],"bridges":["uuid","0e26f03f-6db8-4b51-b32f-6199fb150247"],"subnets":["set",[["uuid","56f1e8a7-ad4c-40d4-b38f-2b232d7b0c01"],["uuid","5c945ccf-5a43-401a-854d-882f4abc1e33"]]],"vxlan":["uuid","cbab1c77-96b5-4a5f-a4ac-778ac32e62dc"],"services":["set",[]]}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:16, 092 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1001]],"op":"select"}],"method":"transact","id":234709}, "response":{"id":234709,"result":[{"rows":[]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 093 module:oputil,
 function:__enter__, router:openwrt1
X-NLAN-Type: logger

CRUD.params()
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:16, 093 module:subnets,
 function:add, router:openwrt1
X-NLAN-Type: logger

Adding a subnet(vlan): 1
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 096 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addbr br1001
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 107 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br1001 tag=1 -- set interface int_br1001 type=internal
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 122 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr1001 tag=1 -- set interface int_dvr1001 type=internal
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 125 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addif br1001 int_br1001
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 129 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_br1001 promisc on
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 133 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_br1001 up
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 134 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_dvr1001 up
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 138 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev br1001 up
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 153 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns add ns1001
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 160 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link add veth-ns1001 type veth peer name temp-ns1001
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 165 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev temp-ns1001 netns ns1001
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 167 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1001 ip link set dev temp-ns1001 name eth0
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 172 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addif br1001 veth-ns1001
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 176 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1001 promisc on
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 182 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1001 up
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 186 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1001 ip link set dev eth0 up
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 189 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1001 ip addr add dev eth0 10.0.1.101/24
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 191 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1001 ip route add default via 10.0.1.1 dev eth0
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 195 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr1001 10.0.1.1/24
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 197 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr1001=interface
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 198 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr1001.ifname=int_dvr1001
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 202 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr1001.proto=static
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 205 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr1001.ipaddr=10.0.1.1
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 207 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr1001.netmask=255.255.255.0
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 209 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr1001=dhcp
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 214 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr1001.interface=int_dvr1001
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 216 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr1001.start=100
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 220 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr1001.limit=150
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 222 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr1001.leasetime=12h
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:16, 233 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: uci commit
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:17, 274 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/network restart
Command failed: Not found

--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:23, 389 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/dnsmasq restart
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:23, 389 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":671202}, "response":{"id":671202,"result":[{"rows":[]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:23, 396 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=1001,actions=mod_vlan_vid:1,resubmit(,10)
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:23, 397 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":128279}, "response":{"id":128279,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:23, 401 module:cmdutil,
 function:log, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=1,actions=strip_vlan,set_tunnel:1001,output:4
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:23, 401 module:oputil,
 function:__exit__, router:openwrt1
X-NLAN-Type: logger

CRUD.__exit__, self.finalize()
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-29 08:39:23, 401 module:ovsdb,
 function:crud, router:openwrt1
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.104'], 'vid': 1, 'ip_vhost': '10.0.1.101/24', 'vni': 1001, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'hub'), ('dhcp', 'enabled')])}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:23, 403 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_18739","row":{"vni":1001,"ip_dvr":["map",[["addr","10.0.1.1/24"],["mode","hub"],["dhcp","enabled"]]],"peers":["set",["192.168.1.104"]],"ip_vhost":"10.0.1.101/24","vid":1},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_18739"]]]]],"op":"mutate"}],"method":"transact","id":851415}, "response":{"id":851415,"result":[{"uuid":["uuid","6e06236b-f005-4991-acfb-907547769f2b"]},{"count":1}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-29 08:39:23, 403 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1001]],"op":"select"}],"method":"transact","id":644665}, "response":{"id":644665,"result":[{"rows":[{"peers":"192.168.1.104","_version":["uuid","1a7bb39e-8d23-4f69-ba71-743063baf124"],"ports":["set",[]],"vni":1001,"vid":1,"_uuid":["uuid","6e06236b-f005-4991-acfb-907547769f2b"],"default_gw":["set",[]],"ip_vhost":"10.0.1.101/24","ip_dvr":["map",[["addr","10.0.1.1/24"],["dhcp","enabled"],["mode","hub"]]]}]}],"error":null}}
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: application/x-nlan
Content-Description: NLAN Response
X-NLAN-Type: nlan_response

OrderedDict([('message', 'Execution completed'), ('exit', 0)])
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m
Content-Type: text/plain
Content-Description: [INFO] 2014-05-29 08:39:23, 405 module:nlan_agent,
 function:<module>, router:openwrt1
X-NLAN-Type: logger

NLAN Agent execution completed
--OzGY5Xk58yxJLrjaDAXptY2t8yyA9t7m--


=+=+= Transaction Summary =+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+

Start Time: 2014-05-29 01:39:18.761533

Router           Result    Elapsed Time
---------------------------------------
openwrt2          :-)         1.05(sec)
openwrt3          :-)         1.11(sec)
rpi1              :-)         1.15(sec)
openwrt1          :-)        14.41(sec)
*** Response from router:openwrt2,platform:openwrt
Hello World!
*** Response from router:openwrt1,platform:openwrt
Hello World!
*** Response from router:openwrt3,platform:openwrt
Hello World!
*** Response from router:rpi1,platform:debian
Hello World!
*** Response from router:openwrt1,platform:openwrt
PING 10.0.1.102 (10.0.1.102): 56 data bytes
64 bytes from 10.0.1.102: seq=0 ttl=64 time=3.263 ms

--- 10.0.1.102 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 3.263/3.263/3.263 ms


*** Response from router:openwrt1,platform:openwrt
PING 10.0.1.102 (10.0.1.102): 56 data bytes
64 bytes from 10.0.1.102: seq=0 ttl=64 time=1.169 ms

--- 10.0.1.102 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 1.169/1.169/1.169 ms


*** Response from router:openwrt1,platform:openwrt
PING 10.0.3.103 (10.0.3.103): 56 data bytes
64 bytes from 10.0.3.103: seq=0 ttl=64 time=1.918 ms

--- 10.0.3.103 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 1.918/1.918/1.918 ms


*** Response from router:openwrt3,platform:openwrt
PING 10.0.1.101 (10.0.1.101): 56 data bytes
64 bytes from 10.0.1.101: seq=0 ttl=63 time=4.451 ms

--- 10.0.1.101 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 4.451/4.451/4.451 ms


*** Response from router:openwrt2,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes
64 bytes from 192.168.100.1: seq=0 ttl=64 time=3.893 ms

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 3.893/3.893/3.893 ms


*** Response from router:openwrt3,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes
64 bytes from 192.168.100.1: seq=0 ttl=64 time=4.666 ms

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 4.666/4.666/4.666 ms


*** Response from router:openwrt2,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes
64 bytes from 192.168.100.1: seq=0 ttl=64 time=1.891 ms

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 1.891/1.891/1.891 ms


*** Response from router:openwrt2,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes
64 bytes from 192.168.100.1: seq=0 ttl=64 time=0.880 ms

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 0.880/0.880/0.880 ms


*** Response from router:openwrt3,platform:openwrt
PING 10.0.1.102 (10.0.1.102): 56 data bytes
64 bytes from 10.0.1.102: seq=0 ttl=63 time=1.831 ms

--- 10.0.1.102 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 1.831/1.831/1.831 ms


*** Response from router:openwrt3,platform:openwrt
PING 10.0.1.1 (10.0.1.1): 56 data bytes
64 bytes from 10.0.1.1: seq=0 ttl=64 time=0.352 ms

--- 10.0.1.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 0.352/0.352/0.352 ms


*** Response from router:openwrt2,platform:openwrt
PING 10.0.1.1 (10.0.1.1): 56 data bytes
64 bytes from 10.0.1.1: seq=0 ttl=64 time=0.440 ms

--- 10.0.1.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 0.440/0.440/0.440 ms


*** Response from router:openwrt2,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes
64 bytes from 8.8.8.8: seq=0 ttl=63 time=1.918 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 1.918/1.918/1.918 ms


*** Response from router:openwrt2,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes
64 bytes from 8.8.8.8: seq=0 ttl=63 time=0.738 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 0.738/0.738/0.738 ms


*** Response from router:openwrt3,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes
64 bytes from 8.8.8.8: seq=0 ttl=63 time=3.164 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 3.164/3.164/3.164 ms


*** Response from router:openwrt3,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes
64 bytes from 8.8.8.8: seq=0 ttl=63 time=2.094 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 2.094/2.094/2.094 ms


*** Response from router:openwrt2,platform:openwrt
*** Response from router:openwrt3,platform:openwrt
*** Response from router:openwrt1,platform:openwrt
*** Response from router:rpi1,platform:debian
*** Response from router:openwrt2,platform:openwrt
Hello World!
*** Response from router:openwrt3,platform:openwrt
Hello World!
*** Response from router:openwrt1,platform:openwrt
Hello World!
*** Response from router:rpi1,platform:debian
Hello World!
*** Response from router:openwrt1,platform:openwrt
PING 10.0.1.102 (10.0.1.102): 56 data bytes
64 bytes from 10.0.1.102: seq=0 ttl=64 time=3.995 ms

--- 10.0.1.102 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 3.995/3.995/3.995 ms


*** Response from router:openwrt1,platform:openwrt
PING 10.0.1.102 (10.0.1.102): 56 data bytes
64 bytes from 10.0.1.102: seq=0 ttl=64 time=0.461 ms

--- 10.0.1.102 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 0.461/0.461/0.461 ms


*** Response from router:openwrt1,platform:openwrt
PING 10.0.3.103 (10.0.3.103): 56 data bytes
64 bytes from 10.0.3.103: seq=0 ttl=64 time=2.185 ms

--- 10.0.3.103 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 2.185/2.185/2.185 ms


*** Response from router:openwrt3,platform:openwrt
PING 10.0.1.101 (10.0.1.101): 56 data bytes
64 bytes from 10.0.1.101: seq=0 ttl=63 time=5.136 ms

--- 10.0.1.101 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 5.136/5.136/5.136 ms


*** Response from router:openwrt2,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes
64 bytes from 192.168.100.1: seq=0 ttl=64 time=3.710 ms

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 3.710/3.710/3.710 ms


*** Response from router:openwrt3,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes
64 bytes from 192.168.100.1: seq=0 ttl=64 time=3.357 ms

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 3.357/3.357/3.357 ms


*** Response from router:openwrt2,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes
64 bytes from 192.168.100.1: seq=0 ttl=64 time=2.738 ms

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 2.738/2.738/2.738 ms


*** Response from router:openwrt2,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes
64 bytes from 192.168.100.1: seq=0 ttl=64 time=0.883 ms

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 0.883/0.883/0.883 ms


*** Response from router:openwrt3,platform:openwrt
PING 10.0.1.102 (10.0.1.102): 56 data bytes
64 bytes from 10.0.1.102: seq=0 ttl=63 time=2.638 ms

--- 10.0.1.102 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 2.638/2.638/2.638 ms


*** Response from router:openwrt3,platform:openwrt
PING 10.0.1.1 (10.0.1.1): 56 data bytes
64 bytes from 10.0.1.1: seq=0 ttl=64 time=0.317 ms

--- 10.0.1.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 0.317/0.317/0.317 ms


*** Response from router:openwrt2,platform:openwrt
PING 10.0.1.1 (10.0.1.1): 56 data bytes
64 bytes from 10.0.1.1: seq=0 ttl=64 time=0.485 ms

--- 10.0.1.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 0.485/0.485/0.485 ms


*** Response from router:openwrt2,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes
64 bytes from 8.8.8.8: seq=0 ttl=63 time=2.620 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 2.620/2.620/2.620 ms


*** Response from router:openwrt2,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes
64 bytes from 8.8.8.8: seq=0 ttl=63 time=1.011 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 1.011/1.011/1.011 ms


*** Response from router:openwrt3,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes
64 bytes from 8.8.8.8: seq=0 ttl=63 time=2.284 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 2.284/2.284/2.284 ms


*** Response from router:openwrt3,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes
64 bytes from 8.8.8.8: seq=0 ttl=63 time=1.772 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 1.772/1.772/1.772 ms


